module.exports=[83702,a=>{"use strict";var b=a.i(86581),c=a.i(37331),d=a.i(84430),e=a.i(71168),f=a.i(35827),g=a.i(18218);let h=(0,g.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var i=a.i(37011);let j=(0,g.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),k=(0,g.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),l=(0,g.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var m=a.i(75586),n=a.i(72983),o=a.i(42975),p=a.i(31472),q=a.i(38389),r=a.i(61239),s=a.i(59531);let t=(0,g.default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),u=(0,g.default)("book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);var v=a.i(12225);function w({bloques:a,onBloquesChange:d}){let[e,f]=(0,c.useState)(null),[g,i]=(0,c.useState)("manual"),[j,k]=(0,c.useState)({opcion2:0,opcion3:0,opcion4:5,opcion5:0}),[l,m]=(0,c.useState)([]),[n,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(null),z=b=>{let c={id:Date.now().toString(),tipo:b,orden:a.length,titulo:"",contenido:"",duracion:"video"===b?10:"lectura"===b?15:20,preguntas:"evaluacion"===b?[]:void 0};d([...a,c]),f(c)},A=b=>{d(a.map(a=>a.id===b.id?b:a)),f(b)},B=(a,b,c)=>{if(!e||!e.preguntas)return;let d=e.preguntas.map(d=>d.id===a?{...d,[b]:c}:d);A({...e,preguntas:d})},C=async()=>{if(!e)return;if(0===j.opcion2+j.opcion3+j.opcion4+j.opcion5)return void alert("âŒ Debes especificar al menos una pregunta para generar");let a=e.contenido||e.descripcion||"";if(!a.trim())return void alert("âŒ Debes agregar contenido o descripciÃ³n al bloque primero");w(!0);try{let b=await fetch("/api/generar-preguntas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contenidoCurso:a,tiposPreguntas:j})});if(!b.ok)throw Error("Error en la API");let c=await b.json();m(c.preguntas||[]),alert(`âœ¨ \xa1${c.preguntas.length} preguntas generadas con IA!
Rev\xedsalas y edita las que necesites.`)}catch(a){console.error("Error al generar preguntas:",a),alert("âŒ Error al generar preguntas con IA. Verifica tu API key de OpenAI.")}finally{w(!1)}},D=a=>{switch(a){case"lectura":return(0,b.jsx)(r.FileText,{className:"h-5 w-5"});case"video":return(0,b.jsx)(s.Video,{className:"h-5 w-5"});case"evaluacion":return(0,b.jsx)(t,{className:"h-5 w-5"});case"documento":return(0,b.jsx)(u,{className:"h-5 w-5"})}},E=a=>{switch(a){case"lectura":return"bg-amber-100 text-amber-700 border-amber-300";case"video":return"bg-primary-100 text-primary-700 border-primary-300";case"evaluacion":return"bg-green-100 text-green-700 border-green-300";case"documento":return"bg-secondary-100 text-secondary-700 border-secondary-300"}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"MaquetaciÃ³n del Curso"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Construye tu curso agregando bloques en el orden que desees."}),(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"AÃ±adir:"}),(0,b.jsx)("button",{type:"button",onClick:()=>z("lectura"),className:"px-4 py-2 bg-amber-500 text-white rounded-lg font-semibold hover:bg-amber-600 transition-all text-sm",children:"Lectura"}),(0,b.jsx)("button",{type:"button",onClick:()=>z("video"),className:"px-4 py-2 bg-primary-600 text-white rounded-lg font-semibold hover:bg-primary-700 transition-all text-sm",children:"Video"}),(0,b.jsx)("button",{type:"button",onClick:()=>z("evaluacion"),className:"px-4 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-all text-sm",children:"EvaluaciÃ³n"}),(0,b.jsx)("button",{type:"button",onClick:()=>z("documento"),className:"px-4 py-2 bg-secondary-500 text-white rounded-lg font-semibold hover:bg-secondary-600 transition-all text-sm",children:"Documento"})]})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:"font-semibold text-gray-900 mb-3",children:["Estructura (",a.length," bloques)"]}),0===a.length?(0,b.jsxs)("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl p-8 text-center",children:[(0,b.jsx)(v.AlertCircle,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-gray-600 font-semibold",children:"No hay bloques aÃºn"}),(0,b.jsx)("p",{className:"text-gray-500 text-sm",children:"Agrega bloques usando los botones de arriba"})]}):(0,b.jsx)("div",{className:"space-y-2",children:a.map((c,g)=>(0,b.jsx)("div",{className:`border-2 rounded-xl p-4 transition-all cursor-pointer ${e?.id===c.id?"border-primary-500 bg-primary-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>{f(c)},children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,b.jsx)("div",{className:`p-2 rounded-lg ${E(c.tipo)}`,children:D(c.tipo)}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsxs)("span",{className:"text-xs font-bold text-gray-500",children:["#",g+1]}),(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded-full font-semibold ${E(c.tipo)}`,children:c.tipo.toUpperCase()})]}),(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:c.titulo||"(Sin tÃ­tulo)"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[c.duracion," min","evaluacion"===c.tipo&&c.preguntas&&` â€¢ ${c.preguntas.length} preguntas`]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("button",{type:"button",onClick:b=>{b.stopPropagation(),(b=>{if(0===b)return;let c=[...a];[c[b],c[b-1]]=[c[b-1],c[b]],d(c)})(g)},disabled:0===g,className:"p-1 hover:bg-gray-200 rounded disabled:opacity-30",children:(0,b.jsx)(p.ChevronUp,{className:"h-4 w-4"})}),(0,b.jsx)("button",{type:"button",onClick:b=>{b.stopPropagation(),(b=>{if(b===a.length-1)return;let c=[...a];[c[b],c[b+1]]=[c[b+1],c[b]],d(c)})(g)},disabled:g===a.length-1,className:"p-1 hover:bg-gray-200 rounded disabled:opacity-30",children:(0,b.jsx)(q.ChevronDown,{className:"h-4 w-4"})}),(0,b.jsx)("button",{type:"button",onClick:b=>{var g;b.stopPropagation(),g=c.id,d(a.filter(a=>a.id!==g)),e?.id===g&&f(null)},className:"p-1 hover:bg-red-100 text-red-600 rounded",children:(0,b.jsx)(o.Trash2,{className:"h-4 w-4"})})]})]})},c.id))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Editor"}),e?(0,b.jsxs)("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6 space-y-4",children:[(0,b.jsxs)("div",{className:`flex items-center gap-3 p-3 rounded-lg ${E(e.tipo)}`,children:[D(e.tipo),(0,b.jsxs)("span",{className:"font-bold text-sm uppercase",children:["Editando: ",e.tipo]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"TÃ­tulo del Bloque *"}),(0,b.jsx)("input",{type:"text",value:e.titulo,onChange:a=>A({...e,titulo:a.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none",placeholder:`T\xedtulo de ${e.tipo}`})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"DuraciÃ³n (minutos) *"}),(0,b.jsx)("input",{type:"number",value:e.duracion,onChange:a=>A({...e,duracion:parseInt(a.target.value)||0}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none",min:"1"})]}),"lectura"===e.tipo&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Contenido de la Lectura *"}),(0,b.jsx)("textarea",{value:e.contenido||"",onChange:a=>A({...e,contenido:a.target.value}),rows:8,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none resize-none",placeholder:"Escribe el contenido de la lectura aquÃ­..."}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"ðŸ’¡ Tip: Puedes usar Markdown para formatear el texto. Para agregar imÃ¡genes usa: ![texto](url-de-imagen)"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Agregar Imagen o PDF"}),(0,b.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-4",children:[(0,b.jsx)("input",{type:"url",placeholder:"URL de la imagen o PDF (ej: https://ejemplo.com/imagen.jpg)",className:"w-full px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none mb-2",onKeyDown:a=>{if("Enter"===a.key){let b=a.target.value;if(b){let c=b.toLowerCase().endsWith(".pdf")?`

[ðŸ“„ Ver PDF](${b})

`:`

![Imagen](${b})

`;A({...e,contenido:(e.contenido||"")+c}),a.target.value=""}}}}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"ðŸ“Ž Pega la URL de tu imagen o PDF y presiona Enter para agregarla al contenido"})]})]})]}),"video"===e.tipo&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"URL del Video (YouTube) *"}),(0,b.jsx)("input",{type:"text",value:e.videoUrl||"",onChange:a=>A({...e,videoUrl:a.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none",placeholder:"https://youtube.com/watch?v=..."})]}),"documento"===e.tipo&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Subir Documento PDF *"}),(0,b.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-primary-500 transition-colors",children:[(0,b.jsx)("input",{type:"file",accept:".pdf,application/pdf",onChange:a=>{let b=a.target.files?.[0];if(b){if("application/pdf"!==b.type)return void alert("Por favor selecciona un archivo PDF");if(b.size>0xa00000)return void alert("El archivo es muy grande. MÃ¡ximo 10MB");let a=new FileReader;a.onloadend=()=>{A({...e,videoUrl:a.result})},a.readAsDataURL(b)}},className:"hidden",id:`pdf-upload-${e.id}`}),(0,b.jsxs)("label",{htmlFor:`pdf-upload-${e.id}`,className:"cursor-pointer",children:[(0,b.jsx)(u,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-700",children:e.videoUrl?"âœ“ PDF cargado":"Click para seleccionar PDF"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"MÃ¡ximo 10MB"})]})]}),e.videoUrl&&(0,b.jsx)("button",{type:"button",onClick:()=>A({...e,videoUrl:""}),className:"text-sm text-red-600 hover:text-red-700 font-semibold",children:"Eliminar PDF"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"DescripciÃ³n del Documento (opcional)"}),(0,b.jsx)("textarea",{value:e.contenido||"",onChange:a=>A({...e,contenido:a.target.value}),rows:4,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none resize-none",placeholder:"InformaciÃ³n adicional sobre el documento..."})]})]}),"evaluacion"===e.tipo&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"DescripciÃ³n de la EvaluaciÃ³n *"}),(0,b.jsx)("textarea",{value:e.descripcion||"",onChange:a=>A({...e,descripcion:a.target.value}),rows:3,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none resize-none",placeholder:"Describe de quÃ© trata esta evaluaciÃ³n..."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Porcentaje MÃ­nimo para Aprobar (%) *"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{type:"number",min:"0",max:"100",value:e.puntajeMinimo||100,onChange:a=>{let b=Math.min(100,Math.max(0,parseInt(a.target.value)||0));A({...e,puntajeMinimo:b})},className:"w-32 px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none text-center font-bold text-lg"}),(0,b.jsx)("span",{className:"text-gray-600 font-semibold",children:"% de respuestas correctas"})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"El estudiante debe obtener al menos este porcentaje para aprobar la evaluaciÃ³n."})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Â¿CÃ³mo quieres crear las preguntas?"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>i("ia"),className:`flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold transition-all ${"ia"===g?"bg-primary-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"}`,children:[(0,b.jsx)("span",{className:"text-xl",children:"ðŸ¤–"}),(0,b.jsx)("span",{children:"Generar con IA"})]}),(0,b.jsxs)("button",{type:"button",onClick:()=>i("manual"),className:`flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold transition-all ${"manual"===g?"bg-primary-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"}`,children:[(0,b.jsx)("span",{className:"text-xl",children:"âœï¸"}),(0,b.jsx)("span",{children:"Crear Manualmente"})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("label",{className:"text-sm font-semibold text-gray-700",children:["Preguntas de la EvaluaciÃ³n (",e.preguntas?.length||0,")"]}),"manual"===g&&(0,b.jsxs)("button",{type:"button",onClick:()=>{if(!e||"evaluacion"!==e.tipo)return;let a={id:Date.now().toString(),pregunta:"",tipo:"multiple",opciones:["",""],respuestaCorrecta:0,multipleRespuestas:!1,retroalimentacionPositiva:"",retroalimentacionNegativa:""};A({...e,preguntas:[...e.preguntas||[],a]})},className:"flex items-center gap-1 px-4 py-2 bg-primary-600 text-white text-sm rounded-lg font-semibold hover:bg-primary-700 transition-colors",children:[(0,b.jsx)(h,{className:"h-4 w-4"}),"Agregar Pregunta"]})]}),"ia"===g&&(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 space-y-4 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("span",{className:"text-2xl",children:"ðŸ¤–"}),(0,b.jsx)("h4",{className:"font-bold text-gray-900 text-lg",children:"Generador de Preguntas con IA"})]}),(0,b.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-800",children:[(0,b.jsx)("p",{className:"font-semibold mb-1",children:"ðŸ’¡ CÃ³mo funciona:"}),(0,b.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,b.jsx)("li",{children:"La IA lee el contenido y descripciÃ³n de este bloque"}),(0,b.jsx)("li",{children:"Genera preguntas con retroalimentaciÃ³n educativa"}),(0,b.jsx)("li",{children:"Puedes revisar y editar antes de agregar"}),(0,b.jsx)("li",{children:"Las preguntas se mezclan en dificultad automÃ¡ticamente"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"ðŸ“ 2 opciones (V/F)"}),(0,b.jsx)("input",{type:"number",min:"0",value:j.opcion2,onChange:a=>k({...j,opcion2:parseInt(a.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-center font-semibold"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"ðŸ“‹ 3 opciones (ABC)"}),(0,b.jsx)("input",{type:"number",min:"0",value:j.opcion3,onChange:a=>k({...j,opcion3:parseInt(a.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-center font-semibold"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"âœ… 4 opciones (ABCD)"}),(0,b.jsx)("input",{type:"number",min:"0",value:j.opcion4,onChange:a=>k({...j,opcion4:parseInt(a.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-center font-semibold"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"ðŸ“š 5 opciones (ABCDE)"}),(0,b.jsx)("input",{type:"number",min:"0",value:j.opcion5,onChange:a=>k({...j,opcion5:parseInt(a.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-center font-semibold"})]})]}),(0,b.jsx)("div",{className:"bg-gray-100 rounded-lg p-3 text-center border border-gray-200",children:(0,b.jsxs)("p",{className:"text-gray-900 font-semibold",children:["Total de preguntas: ",j.opcion2+j.opcion3+j.opcion4+j.opcion5]})}),(0,b.jsx)("button",{type:"button",onClick:C,disabled:n,className:"w-full bg-primary-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-primary-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-sm",children:n?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"animate-spin",children:"âš™ï¸"}),"Generando preguntas..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"âœ¨"}),"Generar Preguntas con IA"]})}),l.length>0&&(0,b.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mt-4 border border-gray-300",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h4",{className:"font-semibold text-lg text-gray-900",children:["Preguntas Generadas (",l.length,")"]}),(0,b.jsx)("button",{type:"button",onClick:()=>{e&&(A({...e,preguntas:[...e.preguntas||[],...l]}),m([]),alert(`âœ… ${l.length} preguntas agregadas al bloque`))},className:"bg-primary-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-primary-700 transition-colors",children:"Agregar Todas"})]}),(0,b.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:l.map((a,c)=>(0,b.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("p",{className:"font-semibold text-gray-900 mb-2",children:[c+1,". ",a.pregunta]}),(0,b.jsx)("div",{className:"space-y-1 text-sm",children:a.opciones.map((c,d)=>(0,b.jsxs)("div",{className:`px-3 py-1 rounded ${d===a.respuestaCorrecta?"bg-primary-100 text-primary-900 font-semibold":"bg-gray-50 text-gray-700 border border-gray-200"}`,children:[String.fromCharCode(65+d),". ",c]},d))}),(a.retroalimentacionPositiva||a.retroalimentacionNegativa)&&(0,b.jsxs)("div",{className:"mt-2 space-y-1",children:[a.retroalimentacionPositiva&&(0,b.jsxs)("div",{className:"text-xs text-gray-700 bg-green-50 p-2 rounded border border-green-200",children:[(0,b.jsx)("strong",{children:"âœ… Correcta:"})," ",a.retroalimentacionPositiva]}),a.retroalimentacionNegativa&&(0,b.jsxs)("div",{className:"text-xs text-gray-700 bg-red-50 p-2 rounded border border-red-200",children:[(0,b.jsx)("strong",{children:"âŒ Incorrecta:"})," ",a.retroalimentacionNegativa]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{y({...l[c],index:c})},className:"bg-gray-600 text-white px-3 py-1 rounded text-sm font-semibold hover:bg-gray-700 transition-colors whitespace-nowrap",children:"âœï¸ Editar"}),(0,b.jsx)("button",{type:"button",onClick:()=>{e&&(A({...e,preguntas:[...e.preguntas||[],a]}),alert("âœ… Pregunta agregada al bloque"))},className:"bg-primary-600 text-white px-3 py-1 rounded text-sm font-semibold hover:bg-primary-700 transition-colors whitespace-nowrap",children:"+ Agregar"}),(0,b.jsx)("button",{type:"button",onClick:()=>{m(l.filter((a,b)=>b!==c))},className:"bg-red-600 text-white px-3 py-1 rounded text-sm font-semibold hover:bg-red-700 transition-all whitespace-nowrap",children:"ðŸ—‘ï¸ Eliminar"})]})]})},c))})]})]}),e.preguntas&&0!==e.preguntas.length?(0,b.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:e.preguntas.map((a,c)=>(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("span",{className:"text-xs font-bold text-gray-500",children:["Pregunta ",c+1]}),(0,b.jsx)("button",{type:"button",onClick:()=>{var b;return b=a.id,void(e&&e.preguntas&&A({...e,preguntas:e.preguntas.filter(a=>a.id!==b)}))},className:"text-red-600 hover:text-red-700",children:(0,b.jsx)(o.Trash2,{className:"h-4 w-4"})})]}),(0,b.jsx)("input",{type:"text",value:a.pregunta,onChange:b=>B(a.id,"pregunta",b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Escribe la pregunta..."}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>B(a.id,"tipo","multiple"),className:`flex-1 px-3 py-2 rounded-lg text-sm font-semibold ${"multiple"===a.tipo?"bg-primary-600 text-white":"bg-gray-200 text-gray-700"}`,children:"MÃºltiple"}),(0,b.jsx)("button",{type:"button",onClick:()=>B(a.id,"tipo","abierta"),className:`flex-1 px-3 py-2 rounded-lg text-sm font-semibold ${"abierta"===a.tipo?"bg-primary-600 text-white":"bg-gray-200 text-gray-700"}`,children:"Abierta"})]}),"multiple"===a.tipo&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 bg-blue-50 rounded-lg p-3",children:[(0,b.jsx)("input",{type:"checkbox",id:`multiple-${a.id}`,checked:a.multipleRespuestas||!1,onChange:b=>{let c=b.target.checked;console.log("Cambio a mÃºltiple respuestas:",c),console.log("Pregunta antes:",a);let d=e.preguntas.map(b=>b.id===a.id?{...b,multipleRespuestas:c,respuestaCorrecta:c?[]:0}:b);A({...e,preguntas:d}),console.log("Pregunta despuÃ©s:",d.find(b=>b.id===a.id))},className:"w-4 h-4 cursor-pointer"}),(0,b.jsxs)("label",{htmlFor:`multiple-${a.id}`,className:"text-sm font-semibold text-blue-700 cursor-pointer flex-1",children:["Permitir mÃºltiples respuestas correctas ",a.multipleRespuestas?"âœ“":""]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 font-semibold",children:a.multipleRespuestas?"â˜‘ï¸ Marca todas las opciones correctas:":"â­• Selecciona la opciÃ³n correcta:"}),(a.opciones||[]).map((c,d)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[a.multipleRespuestas?(0,b.jsx)("input",{type:"checkbox",checked:Array.isArray(a.respuestaCorrecta)&&a.respuestaCorrecta.includes(d),onChange:b=>{b.stopPropagation();let c=Array.isArray(a.respuestaCorrecta)?[...a.respuestaCorrecta]:[];if(b.target.checked)c.includes(d)||c.push(d);else{let a=c.indexOf(d);a>-1&&c.splice(a,1)}console.log("Actualizando respuestas correctas:",c),B(a.id,"respuestaCorrecta",c)},className:"w-4 h-4 cursor-pointer"}):(0,b.jsx)("input",{type:"radio",name:`respuesta-${a.id}`,checked:a.respuestaCorrecta===d,onChange:()=>B(a.id,"respuestaCorrecta",d),className:"w-4 h-4"}),(0,b.jsx)("input",{type:"text",value:c,onChange:b=>{let c=[...a.opciones||[]];c[d]=b.target.value,B(a.id,"opciones",c)},className:"flex-1 px-3 py-1 border border-gray-300 rounded text-sm",placeholder:`Opci\xf3n ${String.fromCharCode(65+d)}`}),(a.opciones?.length||0)>2&&(0,b.jsx)("button",{type:"button",onClick:()=>{let b=[...a.opciones||[]];b.splice(d,1),B(a.id,"opciones",b)},className:"text-red-600 hover:text-red-700",children:(0,b.jsx)(o.Trash2,{className:"h-4 w-4"})})]},d))]}),(0,b.jsx)("button",{type:"button",onClick:()=>{let b=[...a.opciones||[],""];B(a.id,"opciones",b)},className:"w-full px-3 py-2 border-2 border-dashed border-gray-300 rounded-lg text-sm font-semibold text-gray-600 hover:border-gray-400 hover:text-gray-700",children:"+ Agregar OpciÃ³n"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-gray-600 mb-1",children:"RetroalimentaciÃ³n Positiva"}),(0,b.jsx)("textarea",{value:a.retroalimentacionPositiva||"",onChange:b=>B(a.id,"retroalimentacionPositiva",b.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm resize-none",placeholder:"Mensaje cuando responde correctamente..."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-gray-600 mb-1",children:"RetroalimentaciÃ³n Negativa"}),(0,b.jsx)("textarea",{value:a.retroalimentacionNegativa||"",onChange:b=>B(a.id,"retroalimentacionNegativa",b.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm resize-none",placeholder:"Mensaje cuando responde incorrectamente..."})]})]},`${a.id}-${a.multipleRespuestas}`))}):(0,b.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 text-center text-sm text-gray-500",children:"No hay preguntas. Agrega una usando el botÃ³n de arriba."})]})]}):(0,b.jsxs)("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl p-8 text-center",children:[(0,b.jsx)(v.AlertCircle,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-gray-600 font-semibold",children:"Selecciona un bloque para editarlo"}),(0,b.jsx)("p",{className:"text-gray-500 text-sm",children:"O agrega uno nuevo usando los botones de arriba"})]})]})]}),x&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"âœï¸ Editar Pregunta"}),(0,b.jsx)("button",{type:"button",onClick:()=>y(null),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"âœ•"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Pregunta"}),(0,b.jsx)("input",{type:"text",value:x.pregunta,onChange:a=>y({...x,pregunta:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Escribe la pregunta..."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Opciones de Respuesta"}),(0,b.jsx)("div",{className:"space-y-2",children:x.opciones.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("span",{className:"font-bold text-gray-600 w-8",children:[String.fromCharCode(65+c),"."]}),(0,b.jsx)("input",{type:"text",value:a,onChange:a=>{let b=[...x.opciones];b[c]=a.target.value,y({...x,opciones:b})},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:`Opci\xf3n ${String.fromCharCode(65+c)}`})]},c))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Respuesta Correcta"}),(0,b.jsx)("select",{value:x.respuestaCorrecta,onChange:a=>y({...x,respuestaCorrecta:parseInt(a.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:x.opciones.map((a,c)=>(0,b.jsxs)("option",{value:c,children:[String.fromCharCode(65+c),". ",x.opciones[c]]},c))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"RetroalimentaciÃ³n Positiva"}),(0,b.jsx)("textarea",{value:x.retroalimentacionPositiva||"",onChange:a=>y({...x,retroalimentacionPositiva:a.target.value}),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Mensaje cuando responde correctamente..."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"RetroalimentaciÃ³n Negativa"}),(0,b.jsx)("textarea",{value:x.retroalimentacionNegativa||"",onChange:a=>y({...x,retroalimentacionNegativa:a.target.value}),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Mensaje cuando responde incorrectamente..."})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{if(!x)return;let a=[...l];a[x.index]={id:x.id,tipo:x.tipo,pregunta:x.pregunta,opciones:x.opciones,respuestaCorrecta:x.respuestaCorrecta,retroalimentacionPositiva:x.retroalimentacionPositiva,retroalimentacionNegativa:x.retroalimentacionNegativa},m(a),y(null),alert("âœ… Pregunta actualizada")},className:"flex-1 bg-primary-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-primary-700 transition-colors",children:"ðŸ’¾ Guardar Cambios"}),(0,b.jsx)("button",{type:"button",onClick:()=>y(null),className:"flex-1 bg-gray-300 text-gray-700 px-6 py-3 rounded-lg font-bold hover:bg-gray-400 transition-all",children:"Cancelar"})]})]})]})})]})}function x(){let[a,g]=(0,c.useState)([]),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)({titulo:"",descripcion:"",categoria:"",duracion:"",nivel:"Principiante",instructor:"",imagen:"",contenido:"",precio:"0",videoUrl:"",claveInscripcion:"",evaluaciones:[],duracionEstimada:60,prerequisitos:"",certificadoTemplate:"",emailReporte:""}),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)({tipo:"multiple",pregunta:"",opciones:["","","",""],respuestaCorrecta:0,retroalimentacion:""}),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)(null),[N,O]=(0,c.useState)(!1);(0,c.useEffect)(()=>{P()},[]);let P=async()=>{try{let a=(await n.default.listarCursos()).sort((a,b)=>new Date(b.createdAt).getTime()-new Date(a.createdAt).getTime());g(a)}catch(a){console.error("Error al cargar cursos:",a),g([])}},Q=async a=>{a.preventDefault(),r(!0);try{let a={titulo:u.titulo,descripcion:u.descripcion,categoria:u.categoria,duracion:u.duracion,nivel:u.nivel,instructor:u.instructor,imagen:u.imagen,contenido:u.contenido,precio:u.precio,videoUrl:u.videoUrl,claveInscripcion:u.claveInscripcion,duracionEstimada:u.duracionEstimada,prerequisitos:u.prerequisitos,certificadoTemplate:u.certificadoTemplate,emailReporte:u.emailReporte,bloques:JSON.stringify(x),activo:!0,...s&&{id:s}},b=await n.default.guardarCurso(a);if(console.log("Curso guardado:",b),s?alert("Curso actualizado exitosamente"):alert("Curso creado exitosamente"),await P(),!s)try{let c=await fetch("/api/notificaciones",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tipo:"nuevo_curso",titulo:"Â¡Nuevo curso disponible!",mensaje:`Se ha publicado el curso "${a.titulo}" en la categor\xeda ${a.categoria}. \xa1Inscr\xedbete ahora!`,cursoId:b.id})}),d=await c.json();console.log("ðŸ“¢ NotificaciÃ³n enviada:",d)}catch(a){console.error("Error al enviar notificaciÃ³n:",a)}t(null),v({titulo:"",descripcion:"",categoria:"",duracion:"",nivel:"Principiante",instructor:"",imagen:"",contenido:"",precio:"0",videoUrl:"",claveInscripcion:"",evaluaciones:[],duracionEstimada:60,prerequisitos:"",certificadoTemplate:"",emailReporte:""}),y([]),p(!1),alert("Curso creado exitosamente con "+x.length+" bloques! Se ha notificado a todos los usuarios.")}catch(a){console.error("Error completo:",a),alert("Error al crear el curso: "+(a.message||JSON.stringify(a)))}finally{r(!1)}},R=a=>{v({...u,[a.target.name]:a.target.value})},S=async b=>{let c=a.find(a=>a.id===b);if(window.confirm(`\xbfEst\xe1s seguro de eliminar el curso "${c?.titulo}"?

Esta acci\xf3n no se puede deshacer y se perder\xe1n todos los datos asociados.`))try{await n.default.eliminarCurso(b),await P(),alert("âœ… Curso eliminado exitosamente")}catch(a){console.error("Error al eliminar curso:",a),alert("âŒ Error al eliminar el curso")}};return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)(d.Navbar,{}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,b.jsx)("div",{className:"mb-8",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"AdministraciÃ³n de Cursos"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Crea y gestiona los cursos de Academia SantafÃ©"})]})}),(0,b.jsx)("div",{className:"mb-8",children:(0,b.jsxs)("button",{onClick:()=>{p(!o),o&&t(null)},className:"bg-primary-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-primary-700 transition-all duration-300 flex items-center gap-2 shadow-lg hover:shadow-xl",children:[o?(0,b.jsx)(i.X,{className:"h-5 w-5"}):(0,b.jsx)(h,{className:"h-5 w-5"}),o?"Cancelar":"Crear Nuevo Curso"]})}),o&&(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8 border border-gray-100",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,b.jsx)(f.BookOpen,{className:"h-6 w-6 text-primary-600"}),s?"Editar Curso":"Nuevo Curso"]}),(0,b.jsxs)("form",{onSubmit:Q,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"TÃ­tulo del Curso *"}),(0,b.jsx)("input",{type:"text",name:"titulo",value:u.titulo,onChange:R,required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all",placeholder:"Ej: Seguridad Industrial BÃ¡sica"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"CategorÃ­a *"}),(0,b.jsx)("input",{type:"text",name:"categoria",value:u.categoria,onChange:R,required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all",placeholder:"Ej: Seguridad, ProducciÃ³n, Calidad"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Instructor *"}),(0,b.jsx)("input",{type:"text",name:"instructor",value:u.instructor,onChange:R,required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all",placeholder:"Nombre del instructor"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"DuraciÃ³n *"}),(0,b.jsx)("input",{type:"text",name:"duracion",value:u.duracion,onChange:R,required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all",placeholder:"Ej: 4 horas, 2 semanas"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ðŸ“§ Correo para Reportes Diarios"}),(0,b.jsx)("input",{type:"email",name:"emailReporte",value:u.emailReporte,onChange:R,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all",placeholder:"admin@empresa.com"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Los reportes diarios de este curso se enviarÃ¡n a este correo"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nivel"}),(0,b.jsxs)("select",{name:"nivel",value:u.nivel,onChange:R,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all",children:[(0,b.jsx)("option",{children:"Principiante"}),(0,b.jsx)("option",{children:"Intermedio"}),(0,b.jsx)("option",{children:"Avanzado"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Clave de InscripciÃ³n *"}),(0,b.jsx)("input",{type:"text",name:"claveInscripcion",value:u.claveInscripcion,onChange:R,required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all",placeholder:"Clave que el instructor proporcionarÃ¡"})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Imagen del Curso (Portada)"}),(0,b.jsx)("div",{className:"space-y-3",children:H||u.imagen?(0,b.jsxs)("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"bg-green-100 p-2 rounded-lg",children:(0,b.jsx)(j,{className:"h-5 w-5 text-green-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-green-900",children:H?.name||"Imagen cargada"}),(0,b.jsx)("p",{className:"text-sm text-green-600",children:H?`${(H.size/1024).toFixed(2)} KB`:"Imagen guardada"})]})]}),(0,b.jsx)("button",{type:"button",onClick:()=>{I(null),v({...u,imagen:""})},className:"text-red-600 hover:text-red-700 font-semibold",children:"Eliminar"})]}),u.imagen&&(0,b.jsx)("div",{className:"mt-3",children:(0,b.jsx)("img",{src:u.imagen,alt:"Vista previa",className:"max-h-48 rounded-lg mx-auto object-cover"})})]}):(0,b.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-primary-400 transition-all",children:[(0,b.jsx)(j,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,b.jsxs)("label",{className:"cursor-pointer",children:[(0,b.jsx)("span",{className:"text-primary-600 font-semibold hover:text-primary-700",children:"Click para subir imagen"}),(0,b.jsx)("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:a=>{let b=a.target.files?.[0];if(b){if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(b.type))return void alert("Por favor selecciona una imagen vÃ¡lida (JPEG, JPG, PNG, GIF, WEBP)");if(b.size>5242880)return void alert("La imagen es demasiado grande. MÃ¡ximo 5MB");I(b),K(!0);try{let a=new FileReader;a.onload=()=>{let b=a.result;v({...u,imagen:b}),K(!1)},a.onerror=()=>{alert("Error al leer la imagen"),K(!1)},a.readAsDataURL(b)}catch(a){console.error("Error al cargar imagen:",a),alert("Error al cargar la imagen"),K(!1)}}},className:"hidden"})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"MÃ¡ximo 5MB â€¢ JPEG, JPG, PNG, GIF, WEBP"})]})})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"DescripciÃ³n *"}),(0,b.jsx)("textarea",{name:"descripcion",value:u.descripcion,onChange:R,required:!0,rows:4,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all resize-none",placeholder:"Describe el curso, objetivos, y quÃ© aprenderÃ¡n los estudiantes..."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Contenido del Curso"}),(0,b.jsx)("textarea",{name:"contenido",value:u.contenido,onChange:R,rows:4,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all resize-none",placeholder:"Resumen breve de los temas que se cubrirÃ¡n en el curso..."})]}),(0,b.jsx)("div",{className:"border-t-2 border-gray-200 pt-6",children:(0,b.jsx)(w,{bloques:x,onBloquesChange:y})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Plantilla del Certificado (PDF o Imagen)"}),(0,b.jsxs)("div",{className:"space-y-3",children:[L||u.certificadoTemplate?(0,b.jsx)("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"bg-green-500 text-white p-2 rounded-lg",children:(0,b.jsx)(f.BookOpen,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:L?.name||"Plantilla cargada"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:L?`${(L.size/1024).toFixed(1)} KB`:"Archivo guardado"})]})]}),(0,b.jsx)("button",{type:"button",onClick:()=>{M(null),v({...u,certificadoTemplate:""})},className:"text-red-500 hover:text-red-700 transition-colors",children:(0,b.jsx)(i.X,{className:"h-5 w-5"})})]})}):(0,b.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-primary-400 transition-all",children:[(0,b.jsx)(j,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,b.jsxs)("label",{className:"cursor-pointer",children:[(0,b.jsx)("span",{className:"text-primary-600 font-semibold hover:text-primary-700",children:"Click para subir archivo"}),(0,b.jsx)("input",{type:"file",accept:".pdf,application/pdf,image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:a=>{let b=a.target.files?.[0];if(b){if(!["application/pdf","image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(b.type))return void alert("Por favor selecciona un PDF o imagen vÃ¡lida (JPEG, JPG, PNG, GIF, WEBP)");if(b.size>5242880)return void alert("El archivo es demasiado grande. MÃ¡ximo 5MB");M(b),O(!0);try{let a=new FileReader;a.onload=()=>{let b=a.result;v({...u,certificadoTemplate:b}),O(!1)},a.onerror=()=>{alert("Error al leer el archivo"),O(!1)},a.readAsDataURL(b)}catch(a){console.error("Error al cargar archivo:",a),alert("Error al cargar el archivo"),O(!1)}}},className:"hidden"})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"MÃ¡ximo 5MB â€¢ PDF, JPEG, JPG, PNG, GIF, WEBP"})]}),N&&(0,b.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-3 text-center",children:(0,b.jsx)("p",{className:"text-sm text-blue-700",children:"Procesando archivo..."})})]}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["El sistema agregarÃ¡ automÃ¡ticamente el nombre del estudiante, curso, fecha e instructor sobre tu plantilla.",(0,b.jsx)("br",{}),(0,b.jsx)("strong",{children:"Tip:"})," DiseÃ±a tu archivo (A4 horizontal) dejando espacio en el centro para el texto dinÃ¡mico."]})]}),(0,b.jsxs)("div",{className:"flex gap-4 pt-6 border-t-2 border-gray-200",children:[(0,b.jsxs)("button",{type:"submit",className:"bg-primary-600 text-white px-8 py-3 rounded-xl font-semibold hover:bg-primary-700 transition-all duration-300 flex items-center gap-2 shadow-lg hover:shadow-xl",children:[(0,b.jsx)(k,{className:"h-5 w-5"}),s?"Actualizar Curso":"Guardar Curso"]}),(0,b.jsx)("button",{type:"button",onClick:()=>{p(!1),t(null)},className:"bg-gray-200 text-gray-700 px-8 py-3 rounded-xl font-semibold hover:bg-gray-300 transition-all duration-300",children:"Cancelar"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:["Cursos Creados (",a.length,")"]}),0===a.length?(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center border border-gray-100",children:[(0,b.jsx)(f.BookOpen,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-500 text-lg",children:"No hay cursos creados aÃºn"}),(0,b.jsx)("p",{className:"text-gray-400 mt-2",children:"Crea tu primer curso usando el botÃ³n de arriba"})]}):(0,b.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl hover:-translate-y-2 transition-all duration-300 border border-gray-100",children:[(0,b.jsx)("div",{className:"h-48 bg-primary-500 flex items-center justify-center cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.location.href=`/curso/${a.id}?preview=true`,children:a.imagen?(0,b.jsx)("img",{src:a.imagen,alt:a.titulo,className:"w-full h-full object-cover"}):(0,b.jsx)(f.BookOpen,{className:"h-16 w-16 text-white opacity-50"})}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,b.jsx)("span",{className:"px-3 py-1 bg-primary-100 text-primary-700 rounded-full text-sm font-semibold",children:a.categoria}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>{try{console.log("Curso a editar:",a);let b=a.bloques&&"string"==typeof a.bloques&&""!==a.bloques.trim()?JSON.parse(a.bloques):[];v({titulo:a.titulo||"",descripcion:a.descripcion||"",instructor:a.instructor||"",duracion:a.duracion||"",nivel:a.nivel||"Principiante",categoria:a.categoria||"",imagen:a.imagen||"",videoUrl:a.videoUrl||"",contenido:a.contenido||"",precio:a.precio?.toString()||"0",claveInscripcion:a.claveInscripcion||"",evaluaciones:[],duracionEstimada:a.duracionEstimada||60,prerequisitos:a.prerequisitos||"",certificadoTemplate:a.certificadoTemplate||"",emailReporte:a.emailReporte||""}),y(b),t(a.id),p(!0),window.scrollTo({top:0,behavior:"smooth"})}catch(a){console.error("Error al cargar curso:",a),alert("Error al cargar el curso para editar: "+a)}},className:"text-blue-500 hover:text-blue-700 hover:bg-blue-50 p-2 rounded-lg transition-all",title:"Editar curso",children:(0,b.jsx)(l,{className:"h-5 w-5"})}),(0,b.jsx)("button",{onClick:()=>S(a.id),className:"text-red-500 hover:text-red-700 hover:bg-red-50 p-2 rounded-lg transition-all",title:"Eliminar curso",children:(0,b.jsx)(i.X,{className:"h-5 w-5"})})]})]}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2 hover:text-primary-600 cursor-pointer",onClick:()=>window.location.href=`/curso/${a.id}?preview=true`,children:a.titulo}),(0,b.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:a.descripcion}),(0,b.jsxs)("div",{className:"space-y-2 text-sm text-gray-500 mb-4",children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Instructor:"})," ",a.instructor]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"DuraciÃ³n:"})," ",a.duracion]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Nivel:"})," ",a.nivel]}),a.emailReporte&&(0,b.jsxs)("p",{className:"text-xs text-green-600",children:["ðŸ“§ ",a.emailReporte]}),(0,b.jsxs)("p",{className:"text-xs text-gray-400",children:["Creado: ",new Date(a.createdAt||a.fechacreacion).toLocaleDateString("es-CO")]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>window.location.href=`/curso/${a.id}?preview=true`,className:"flex-1 bg-primary-600 text-white py-2 rounded-lg font-semibold hover:bg-primary-700 transition-colors cursor-pointer",children:"Ver Preview"}),(0,b.jsxs)("button",{onClick:()=>window.location.href=`/admin/reportes?curso=${a.id}`,className:"flex-1 bg-green-600 text-white py-2 rounded-lg font-semibold hover:bg-green-700 transition-colors cursor-pointer flex items-center justify-center gap-2",title:"Ver reportes de este curso",children:[(0,b.jsx)(m.FileSpreadsheet,{className:"h-4 w-4"}),"Reportes"]})]})]})]},a.id))})]})]}),(0,b.jsx)(e.Footer,{})]})}a.s(["default",()=>x],83702)}];

//# sourceMappingURL=academia-santafe_app_AdminCursos_page_tsx_926b1330._.js.map