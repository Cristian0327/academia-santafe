module.exports=[37331,(a,b,c)=>{"use strict";b.exports=a.r(29614).vendored["react-ssr"].React},89018,(a,b,c)=>{"use strict";b.exports=a.r(29614).vendored.contexts.AppRouterContext},20928,(a,b,c)=>{"use strict";b.exports=a.r(29614).vendored["react-ssr"].ReactServerDOMTurbopackClient},57577,(a,b,c)=>{"use strict";b.exports=a.r(29614).vendored["react-ssr"].ReactDOM},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},61117,(a,b,c)=>{"use strict";b.exports=a.r(29614).vendored.contexts.HooksClientContext},27367,(a,b,c)=>{"use strict";b.exports=a.r(29614).vendored.contexts.ServerInsertedHtml},35827,a=>{"use strict";let b=(0,a.i(18218).default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);a.s(["BookOpen",()=>b],35827)},72983,a=>{"use strict";let b="/api/cursos",c=a=>`/api/cursos/${a}`,d="/api/inscripciones",e=(a,b)=>`/api/inscripciones/${a}/${b}`,f=a=>`/api/inscripciones/curso/${a}`,g="/api/health",h={headers:{"Content-Type":"application/json"},timeout:3e4},i=new class{baseUrl;constructor(){this.baseUrl="http://localhost:3001"}async request(a,b={}){let c=`${this.baseUrl}${a}`;try{let a=await fetch(c,{...h,...b,headers:{...h.headers,...b.headers||{}}});if(!a.ok){let b=await a.text();throw console.error(`HTTP ${a.status} error:`,b),Error(`HTTP error! status: ${a.status}`)}return await a.json()}catch(b){throw console.error(`Error en request a ${a}:`,b),b}}async listarCursos(){return this.request(b)}async obtenerCurso(a){return this.request(c(a))}async guardarCurso(a){return this.request(b,{method:"POST",body:JSON.stringify(a)})}async eliminarCurso(a){return this.request(c(a),{method:"DELETE"})}async guardarInscripcion(a){return this.request(d,{method:"POST",body:JSON.stringify(a)})}async obtenerInscripcion(a,b){return this.request(e(a,b))}async listarInscripcionesCurso(a){return this.request(f(a))}async listarTodasInscripciones(){return this.request(d)}async eliminarInscripcion(a,b){return this.request(e(a,b),{method:"DELETE"})}async health(){return this.request(g)}};a.s(["default",0,i],72983)},21559,a=>{"use strict";let b=(0,a.i(18218).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);a.s(["Users",()=>b],21559)},75586,a=>{"use strict";let b=(0,a.i(18218).default)("file-spreadsheet",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);a.s(["FileSpreadsheet",()=>b],75586)},51236,a=>{"use strict";let b=(0,a.i(18218).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],51236)},19207,a=>{"use strict";let b=(0,a.i(18218).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);a.s(["Download",()=>b],19207)},78712,a=>{"use strict";var b=a.i(86581),c=a.i(37331),d=a.i(67119),e=a.i(84430),f=a.i(71168),g=a.i(75586),h=a.i(19207),i=a.i(21559),j=a.i(35827),k=a.i(37688);let l=(0,a.i(18218).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var m=a.i(51236),n=a.i(72983);function o(){let a=(0,d.useSearchParams)().get("curso"),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(a||"todos"),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(new Date().toISOString().split("T")[0]),[A,B]=(0,c.useState)([]);(0,c.useEffect)(()=>{D(),C()},[]),(0,c.useEffect)(()=>{a&&A.length>0&&t(a)},[a,A]),(0,c.useEffect)(()=>{if("todos"!==s){let a=A.find(a=>a.id===s);a?.emailReporte&&v(a.emailReporte)}},[s,A]);let C=async()=>{try{let a=await n.default.listarCursos();B(a)}catch(a){console.error("Error al cargar cursos:",a)}},D=async()=>{try{let a=await n.default.listarTodasInscripciones();p(a);let b=[...new Set(a.map(a=>a.cursoId))];r(b),console.log(`‚úÖ ${a.length} inscripciones cargadas desde servidor`)}catch(b){console.warn("‚ö†Ô∏è No se pudo cargar desde servidor, usando localStorage:",b);let a=[];for(let b=0;b<localStorage.length;b++){let c=localStorage.key(b);if(c?.startsWith("inscripcion_"))try{let b=JSON.parse(localStorage.getItem(c)||"{}");a.push(b)}catch(a){console.error("Error al parsear inscripci√≥n:",a)}}p(a),r([...new Set(a.map(a=>a.cursoId))])}},E=async()=>{if(!u||!u.includes("@"))return void alert("‚ùå Por favor ingresa un correo electr√≥nico v√°lido");if("todos"===s)return void alert("‚ùå Por favor selecciona un curso espec√≠fico para el reporte");let a=o.filter(a=>a.cursoId===s),b=y?a.filter(a=>(a.fechaInscripcion?new Date(a.fechaInscripcion).toISOString().split("T")[0]:null)===y):a;if(0===b.length)return void alert("‚ùå No hay inscripciones para este curso en la fecha seleccionada");x(!0);try{let a=b.map(a=>({nombre:a.nombre,documento:a.documento,cargo:a.cargo,empresa:a.empresa,progreso:a.progreso||0,aprobado:a.completado&&100===a.progreso,reprobado:a.progreso>0&&a.progreso<100&&!a.completado,fechaInscripcion:a.fechaInscripcion})),c=A.find(a=>a.id===s),d=c?.titulo||`Curso ${s}`,e=await fetch("/api/reportes-diarios",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cursoId:s,cursoTitulo:d,fechaInicio:y,emailDestino:u,participantes:a})}),f=await e.json();f.success?(alert(`‚úÖ Reporte enviado exitosamente a ${u}

Participantes incluidos: ${f.participantes}`),v("")):alert(`‚ùå Error al enviar reporte: ${f.error||"Error desconocido"}`)}catch(a){console.error("Error:",a),alert(`‚ùå Error al enviar reporte: ${a.message}`)}finally{x(!1)}},F="todos"===s?o:o.filter(a=>a.cursoId===s);return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)(e.Navbar,{}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-12",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Panel de Administraci√≥n - Reportes"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Visualiza y env√≠a reportes de inscripciones y progreso"}),a&&A.find(b=>b.id===a)&&(0,b.jsxs)("div",{className:"mt-2 inline-flex items-center gap-2 bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold",children:[(0,b.jsx)("span",{children:"üìä Viendo:"}),(0,b.jsx)("span",{children:A.find(b=>b.id===a)?.titulo})]})]}),(0,b.jsx)(g.FileSpreadsheet,{className:"h-16 w-16 text-primary-600"})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[(0,b.jsx)("div",{className:"bg-primary-50 rounded-xl p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-primary-700 font-semibold mb-1",children:"Total Inscripciones"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-primary-900",children:o.length})]}),(0,b.jsx)(i.Users,{className:"h-12 w-12 text-primary-600"})]})}),(0,b.jsx)("div",{className:"bg-green-50 rounded-xl p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-green-700 font-semibold mb-1",children:"Cursos Completados"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-green-900",children:o.filter(a=>a.completado).length})]}),(0,b.jsx)(j.BookOpen,{className:"h-12 w-12 text-green-600"})]})}),(0,b.jsx)("div",{className:"bg-orange-50 rounded-xl p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-orange-700 font-semibold mb-1",children:"En Progreso"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-orange-900",children:o.filter(a=>!a.completado&&a.progreso>0).length})]}),(0,b.jsx)(j.BookOpen,{className:"h-12 w-12 text-orange-600"})]})})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-r from-primary-50 to-blue-50 rounded-xl p-6 mb-6 border-2 border-primary-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)(k.Mail,{className:"h-6 w-6 text-primary-600"}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Env√≠o Autom√°tico de Reportes"})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Configura el env√≠o autom√°tico del reporte diario por correo electr√≥nico"}),(0,b.jsxs)("div",{className:"grid md:grid-cols-3 gap-4 mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Curso *"}),(0,b.jsxs)("select",{value:s,onChange:a=>t(a.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none",children:[(0,b.jsx)("option",{value:"todos",children:"Selecciona un curso"}),A.map(a=>(0,b.jsx)("option",{value:a.id,children:a.titulo},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[(0,b.jsx)(m.Calendar,{className:"inline h-4 w-4 mr-1"}),"Fecha"]}),(0,b.jsx)("input",{type:"date",value:y,onChange:a=>z(a.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Correo Destino *"}),(0,b.jsx)("input",{type:"email",value:u,onChange:a=>v(a.target.value),placeholder:A.find(a=>a.id===s)?.emailReporte||"ejemplo@empresa.com",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:A.find(a=>a.id===s)?.emailReporte?"‚úÖ Email configurado en el curso":"Ingresa manualmente el correo"})]})]}),(0,b.jsx)("button",{onClick:E,disabled:w||"todos"===s||!u,className:"w-full flex items-center justify-center gap-2 bg-primary-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-primary-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:w?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Enviando..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l,{className:"h-5 w-5"}),"Enviar Reporte por Correo"]})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6 pb-6 border-b border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-gray-700",children:"Ver datos del curso:"}),(0,b.jsxs)("select",{value:s,onChange:a=>t(a.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none",children:[(0,b.jsx)("option",{value:"todos",children:"Todos los cursos"}),A.map(a=>(0,b.jsx)("option",{value:a.id,children:a.titulo},a.id))]})]}),(0,b.jsxs)("button",{onClick:()=>{let a="todos"===s?o:o.filter(a=>a.cursoId===s);if(0===a.length)return void alert("No hay datos para exportar");let b=a.map(a=>[a.nombre||"",a.documento||"",a.cargo||"No especificado",a.empresa||"No especificado",a.cursoId||"",a.progreso||0,a.completado?"S√≠":"No",a.fechaInscripcion?new Date(a.fechaInscripcion).toLocaleDateString("es-ES"):"",a.activo?"Activo":"Inactivo"]),c="\uFEFF";c+="Nombre,Documento,Cargo,Empresa,Curso ID,Progreso (%),Completado,Fecha Inscripci√≥n,Estado\n",b.forEach(a=>{c+=a.map(a=>`"${a}"`).join(",")+"\n"});let d=new Blob([c],{type:"text/csv;charset=utf-8;"}),e=document.createElement("a"),f=URL.createObjectURL(d);e.setAttribute("href",f),e.setAttribute("download",`reporte_estudiantes_${new Date().toISOString().split("T")[0]}.csv`),e.style.visibility="hidden",document.body.appendChild(e),e.click(),document.body.removeChild(e),alert("‚úÖ Reporte exportado exitosamente")},className:"flex items-center gap-2 bg-green-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-green-700 transition-all shadow-lg",children:[(0,b.jsx)(h.Download,{className:"h-5 w-5"}),"Exportar a CSV"]})]}),(0,b.jsxs)("div",{className:"overflow-x-auto",children:[(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-100",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Nombre"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Documento"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Cargo"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Empresa"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Progreso"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Estado"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Fecha"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:F.map((a,c)=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:a.nombre}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:a.documento}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:a.cargo||"No especificado"}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:a.empresa||"No especificado"}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:(0,b.jsx)("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:`${a.progreso}%`}})}),(0,b.jsxs)("span",{className:"text-sm font-semibold text-gray-700",children:[a.progreso,"%"]})]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${a.completado?"bg-green-100 text-green-700":a.progreso>0?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-700"}`,children:a.completado?"‚úì Aprobado":a.progreso>0?"‚è≥ En Progreso":"Sin iniciar"})}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:a.fechaInscripcion?new Date(a.fechaInscripcion).toLocaleDateString("es-ES"):"-"})]},c))})]}),0===F.length&&(0,b.jsx)("div",{className:"text-center py-12",children:(0,b.jsx)("p",{className:"text-gray-500",children:"No hay inscripciones registradas"})})]})]})}),(0,b.jsx)(f.Footer,{})]})}function p(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Cargando..."}),children:(0,b.jsx)(o,{})})}a.s(["default",()=>p],78712)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__22b1a017._.js.map