(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,98012,(e,s,t)=>{s.exports=e.r(49246)},42480,e=>{"use strict";let s="localhost"!==window.location.hostname,t={apiUrl:s?"":"http://localhost:3001",endpoints:{cursos:s&&1?"/data/cursos-list.json":"/api/cursos",curso:e=>s&&1?`/data/cursos/${e}.json`:`/api/cursos/${e}`,inscripciones:"/api/inscripciones",inscripcion:(e,s)=>`/api/inscripciones/${e}/${s}`,inscripcionesCurso:e=>`/api/inscripciones/curso/${e}`,health:"/api/health"},requestConfig:{headers:{"Content-Type":"application/json"},timeout:3e4}},r=new class{baseUrl;constructor(){this.baseUrl=t.apiUrl}async request(e,s={}){let r=`${this.baseUrl}${e}`;try{let e=await fetch(r,{...t.requestConfig,...s,headers:{...t.requestConfig.headers,...s.headers||{}}});if(!e.ok){let s=await e.text();throw console.error(`HTTP ${e.status} error:`,s),Error(`HTTP error! status: ${e.status}`)}return await e.json()}catch(s){throw console.error(`Error en request a ${e}:`,s),s}}async listarCursos(){if("localhost"!==window.location.hostname){try{let e=await fetch("/data/cursos-list.json");if(e.ok){let s=await e.json(),t=localStorage.getItem("cursos"),r=t?JSON.parse(t):[],a=[...s];return r.forEach(e=>{let s=a.findIndex(s=>s.id===e.id);s>=0?a[s]=e:a.push(e)}),a}}catch(e){console.warn("No se pudieron cargar cursos est√°ticos, usando solo localStorage")}let e=localStorage.getItem("cursos");return e?JSON.parse(e):[]}return this.request(t.endpoints.cursos)}async obtenerCurso(e){if("localhost"!==window.location.hostname){try{let s=await fetch(`/data/cursos/${e}.json`);if(s.ok)return await s.json()}catch(e){console.warn("No se pudo cargar curso est√°tico, buscando en localStorage")}let s=localStorage.getItem("cursos");return(s?JSON.parse(s):[]).find(s=>s.id===e)||null}return this.request(t.endpoints.curso(e))}async guardarCurso(e){if("localhost"!==window.location.hostname){let s=localStorage.getItem("cursos"),t=s?JSON.parse(s):[];if(e.id){let s=t.findIndex(s=>s.id===e.id);-1!==s?t[s]={...e,actualizado:new Date().toISOString()}:t.push({...e,createdAt:new Date().toISOString()})}else e.id=Date.now().toString(),e.createdAt=new Date().toISOString(),e.activo=!0,t.push(e);return localStorage.setItem("cursos",JSON.stringify(t)),{success:!0,mensaje:"Curso guardado en navegador",curso:e}}return this.request(t.endpoints.cursos,{method:"POST",body:JSON.stringify(e)})}async eliminarCurso(e){if("localhost"!==window.location.hostname){let s=localStorage.getItem("cursos"),t=(s?JSON.parse(s):[]).filter(s=>s.id!==e);localStorage.setItem("cursos",JSON.stringify(t));return}return this.request(t.endpoints.curso(e),{method:"DELETE"})}async guardarInscripcion(e){return this.request(t.endpoints.inscripciones,{method:"POST",body:JSON.stringify(e)})}async obtenerInscripcion(e,s){return this.request(t.endpoints.inscripcion(e,s))}async listarInscripcionesCurso(e){return this.request(t.endpoints.inscripcionesCurso(e))}async listarTodasInscripciones(){return this.request(t.endpoints.inscripciones)}async eliminarInscripcion(e,s){return this.request(t.endpoints.inscripcion(e,s),{method:"DELETE"})}async health(){return this.request(t.endpoints.health)}};e.s(["default",0,r],42480)},45688,e=>{"use strict";let s=(0,e.i(13063).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["Users",()=>s],45688)},31039,e=>{"use strict";let s=(0,e.i(13063).default)("file-spreadsheet",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);e.s(["FileSpreadsheet",()=>s],31039)},46100,e=>{"use strict";let s=(0,e.i(13063).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>s],46100)},67209,e=>{"use strict";let s=(0,e.i(13063).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>s],67209)},23948,e=>{"use strict";var s=e.i(53670),t=e.i(59876),r=e.i(98012),a=e.i(38412),o=e.i(940),i=e.i(31039),n=e.i(67209),l=e.i(45688),c=e.i(99547),d=e.i(2389);let p=(0,e.i(13063).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var m=e.i(46100),h=e.i(42480);function u(){let e=(0,r.useSearchParams)().get("curso"),[u,x]=(0,t.useState)([]),[g,f]=(0,t.useState)([]),[y,b]=(0,t.useState)(e||"todos"),[j,N]=(0,t.useState)(""),[v,w]=(0,t.useState)(!1),[S,I]=(0,t.useState)(new Date().toISOString().split("T")[0]),[C,k]=(0,t.useState)([]);(0,t.useEffect)(()=>{O(),E()},[]),(0,t.useEffect)(()=>{e&&C.length>0&&b(e)},[e,C]),(0,t.useEffect)(()=>{if("todos"!==y){let e=C.find(e=>e.id===y);e?.emailReporte&&N(e.emailReporte)}},[y,C]);let E=async()=>{try{let e=await h.default.listarCursos();k(e)}catch(e){console.error("Error al cargar cursos:",e)}},O=async()=>{try{let e=await h.default.listarTodasInscripciones();x(e);let s=[...new Set(e.map(e=>e.cursoId))];f(s),console.log(`‚úÖ ${e.length} inscripciones cargadas desde servidor`)}catch(s){console.warn("‚ö†Ô∏è No se pudo cargar desde servidor, usando localStorage:",s);let e=[];for(let s=0;s<localStorage.length;s++){let t=localStorage.key(s);if(t?.startsWith("inscripcion_"))try{let s=JSON.parse(localStorage.getItem(t)||"{}");e.push(s)}catch(e){console.error("Error al parsear inscripci√≥n:",e)}}x(e),f([...new Set(e.map(e=>e.cursoId))])}},T=async()=>{if(!j||!j.includes("@"))return void alert("‚ùå Por favor ingresa un correo electr√≥nico v√°lido");if("todos"===y)return void alert("‚ùå Por favor selecciona un curso espec√≠fico para el reporte");let e=u.filter(e=>e.cursoId===y),s=S?e.filter(e=>(e.fechaInscripcion?new Date(e.fechaInscripcion).toISOString().split("T")[0]:null)===S):e;if(0===s.length)return void alert("‚ùå No hay inscripciones para este curso en la fecha seleccionada");w(!0);try{let e=s.map(e=>({nombre:e.nombre,documento:e.documento,cargo:e.cargo,empresa:e.empresa,progreso:e.progreso||0,aprobado:e.completado&&100===e.progreso,reprobado:e.progreso>0&&e.progreso<100&&!e.completado,fechaInscripcion:e.fechaInscripcion})),t=C.find(e=>e.id===y),r=t?.titulo||`Curso ${y}`,a=await fetch("/api/reportes-diarios",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cursoId:y,cursoTitulo:r,fechaInicio:S,emailDestino:j,participantes:e})}),o=await a.json();o.success?(alert(`‚úÖ Reporte enviado exitosamente a ${j}

Participantes incluidos: ${o.participantes}`),N("")):alert(`‚ùå Error al enviar reporte: ${o.error||"Error desconocido"}`)}catch(e){console.error("Error:",e),alert(`‚ùå Error al enviar reporte: ${e.message}`)}finally{w(!1)}},$="todos"===y?u:u.filter(e=>e.cursoId===y);return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(a.Navbar,{}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-12",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Panel de Administraci√≥n - Reportes"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Visualiza y env√≠a reportes de inscripciones y progreso"}),e&&C.find(s=>s.id===e)&&(0,s.jsxs)("div",{className:"mt-2 inline-flex items-center gap-2 bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold",children:[(0,s.jsx)("span",{children:"üìä Viendo:"}),(0,s.jsx)("span",{children:C.find(s=>s.id===e)?.titulo})]})]}),(0,s.jsx)(i.FileSpreadsheet,{className:"h-16 w-16 text-primary-600"})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[(0,s.jsx)("div",{className:"bg-primary-50 rounded-xl p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-primary-700 font-semibold mb-1",children:"Total Inscripciones"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-primary-900",children:u.length})]}),(0,s.jsx)(l.Users,{className:"h-12 w-12 text-primary-600"})]})}),(0,s.jsx)("div",{className:"bg-green-50 rounded-xl p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-green-700 font-semibold mb-1",children:"Cursos Completados"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-green-900",children:u.filter(e=>e.completado).length})]}),(0,s.jsx)(c.BookOpen,{className:"h-12 w-12 text-green-600"})]})}),(0,s.jsx)("div",{className:"bg-orange-50 rounded-xl p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-orange-700 font-semibold mb-1",children:"En Progreso"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-orange-900",children:u.filter(e=>!e.completado&&e.progreso>0).length})]}),(0,s.jsx)(c.BookOpen,{className:"h-12 w-12 text-orange-600"})]})})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-primary-50 to-blue-50 rounded-xl p-6 mb-6 border-2 border-primary-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)(d.Mail,{className:"h-6 w-6 text-primary-600"}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Env√≠o Autom√°tico de Reportes"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Configura el env√≠o autom√°tico del reporte diario por correo electr√≥nico"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Curso *"}),(0,s.jsxs)("select",{value:y,onChange:e=>b(e.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none",children:[(0,s.jsx)("option",{value:"todos",children:"Selecciona un curso"}),C.map(e=>(0,s.jsx)("option",{value:e.id,children:e.titulo},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[(0,s.jsx)(m.Calendar,{className:"inline h-4 w-4 mr-1"}),"Fecha"]}),(0,s.jsx)("input",{type:"date",value:S,onChange:e=>I(e.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Correo Destino *"}),(0,s.jsx)("input",{type:"email",value:j,onChange:e=>N(e.target.value),placeholder:C.find(e=>e.id===y)?.emailReporte||"ejemplo@empresa.com",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:C.find(e=>e.id===y)?.emailReporte?"‚úÖ Email configurado en el curso":"Ingresa manualmente el correo"})]})]}),(0,s.jsx)("button",{onClick:T,disabled:v||"todos"===y||!j,className:"w-full flex items-center justify-center gap-2 bg-primary-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-primary-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:v?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Enviando..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p,{className:"h-5 w-5"}),"Enviar Reporte por Correo"]})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6 pb-6 border-b border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-gray-700",children:"Ver datos del curso:"}),(0,s.jsxs)("select",{value:y,onChange:e=>b(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none",children:[(0,s.jsx)("option",{value:"todos",children:"Todos los cursos"}),C.map(e=>(0,s.jsx)("option",{value:e.id,children:e.titulo},e.id))]})]}),(0,s.jsxs)("button",{onClick:()=>{let e="todos"===y?u:u.filter(e=>e.cursoId===y);if(0===e.length)return void alert("No hay datos para exportar");let s=e.map(e=>[e.nombre||"",e.documento||"",e.cargo||"No especificado",e.empresa||"No especificado",e.cursoId||"",e.progreso||0,e.completado?"S√≠":"No",e.fechaInscripcion?new Date(e.fechaInscripcion).toLocaleDateString("es-ES"):"",e.activo?"Activo":"Inactivo"]),t="\uFEFF";t+="Nombre,Documento,Cargo,Empresa,Curso ID,Progreso (%),Completado,Fecha Inscripci√≥n,Estado\n",s.forEach(e=>{t+=e.map(e=>`"${e}"`).join(",")+"\n"});let r=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),o=URL.createObjectURL(r);a.setAttribute("href",o),a.setAttribute("download",`reporte_estudiantes_${new Date().toISOString().split("T")[0]}.csv`),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),alert("‚úÖ Reporte exportado exitosamente")},className:"flex items-center gap-2 bg-green-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-green-700 transition-all shadow-lg",children:[(0,s.jsx)(n.Download,{className:"h-5 w-5"}),"Exportar a CSV"]})]}),(0,s.jsxs)("div",{className:"overflow-x-auto",children:[(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Nombre"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Documento"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Cargo"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Empresa"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Progreso"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Estado"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Fecha"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200",children:$.map((e,t)=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.nombre}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.documento}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.cargo||"No especificado"}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.empresa||"No especificado"}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:`${e.progreso}%`}})}),(0,s.jsxs)("span",{className:"text-sm font-semibold text-gray-700",children:[e.progreso,"%"]})]})}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${e.completado?"bg-green-100 text-green-700":e.progreso>0?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-700"}`,children:e.completado?"‚úì Aprobado":e.progreso>0?"‚è≥ En Progreso":"Sin iniciar"})}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.fechaInscripcion?new Date(e.fechaInscripcion).toLocaleDateString("es-ES"):"-"})]},t))})]}),0===$.length&&(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{className:"text-gray-500",children:"No hay inscripciones registradas"})})]})]})}),(0,s.jsx)(o.Footer,{})]})}function x(){return(0,s.jsx)(t.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Cargando..."}),children:(0,s.jsx)(u,{})})}e.s(["default",()=>x],23948)}]);