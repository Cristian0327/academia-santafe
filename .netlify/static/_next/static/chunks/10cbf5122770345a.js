(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32911,e=>{"use strict";var r=e.i(53670),a=e.i(59876),t=e.i(38412),s=e.i(940),o=e.i(99547),i=e.i(13063);let l=(0,i.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var n=e.i(18704);let c=(0,i.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),d=(0,i.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),m=(0,i.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var u=e.i(31039),p=e.i(42480),x=e.i(77345),g=e.i(94755),b=e.i(81834),h=e.i(67655),y=e.i(52671);let f=(0,i.default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),j=(0,i.default)("book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);var v=e.i(46178);function N({bloques:e,onBloquesChange:t}){let[s,o]=(0,a.useState)(null),[i,n]=(0,a.useState)("manual"),[c,d]=(0,a.useState)({opcion2:0,opcion3:0,opcion4:5,opcion5:0}),[m,u]=(0,a.useState)([]),[p,N]=(0,a.useState)(!1),[w,C]=(0,a.useState)(null),k=r=>{let a={id:Date.now().toString(),tipo:r,orden:e.length,titulo:"",contenido:"",duracion:"video"===r?10:"lectura"===r?15:20,preguntas:"evaluacion"===r?[]:void 0};t([...e,a]),o(a)},P=r=>{t(e.map(e=>e.id===r.id?r:e)),o(r)},E=(e,r,a)=>{if(!s||!s.preguntas)return;let t=s.preguntas.map(t=>t.id===e?{...t,[r]:a}:t);P({...s,preguntas:t})},S=async()=>{if(!s)return;if(0===c.opcion2+c.opcion3+c.opcion4+c.opcion5)return void alert("âŒ Debes especificar al menos una pregunta para generar");let e=s.contenido||s.descripcion||"";if(!e.trim())return void alert("âŒ Debes agregar contenido o descripciÃ³n al bloque primero");N(!0);try{let r=window.location.hostname.includes("netlify")?"/.netlify/functions/generar-preguntas":"/api/generar-preguntas",a=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contenidoCurso:e,tiposPreguntas:c})});if(!a.ok)throw Error("Error en la API");let t=await a.json();u(t.preguntas||[]),alert(`âœ¨ \xa1${t.preguntas.length} preguntas generadas con IA!
Rev\xedsalas y edita las que necesites.`)}catch(e){console.error("Error al generar preguntas:",e),alert("âŒ Error al generar preguntas con IA. Verifica tu API key de OpenAI.")}finally{N(!1)}},A=e=>{switch(e){case"lectura":return(0,r.jsx)(h.FileText,{className:"h-5 w-5"});case"video":return(0,r.jsx)(y.Video,{className:"h-5 w-5"});case"evaluacion":return(0,r.jsx)(f,{className:"h-5 w-5"});case"documento":return(0,r.jsx)(j,{className:"h-5 w-5"})}},I=e=>{switch(e){case"lectura":return"bg-amber-100 text-amber-700 border-amber-300";case"video":return"bg-primary-100 text-primary-700 border-primary-300";case"evaluacion":return"bg-green-100 text-green-700 border-green-300";case"documento":return"bg-secondary-100 text-secondary-700 border-secondary-300"}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"MaquetaciÃ³n del Curso"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Construye tu curso agregando bloques en el orden que desees."}),(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"AÃ±adir:"}),(0,r.jsx)("button",{type:"button",onClick:()=>k("lectura"),className:"px-4 py-2 bg-amber-500 text-white rounded-lg font-semibold hover:bg-amber-600 transition-all text-sm",children:"Lectura"}),(0,r.jsx)("button",{type:"button",onClick:()=>k("video"),className:"px-4 py-2 bg-primary-600 text-white rounded-lg font-semibold hover:bg-primary-700 transition-all text-sm",children:"Video"}),(0,r.jsx)("button",{type:"button",onClick:()=>k("evaluacion"),className:"px-4 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-all text-sm",children:"EvaluaciÃ³n"}),(0,r.jsx)("button",{type:"button",onClick:()=>k("documento"),className:"px-4 py-2 bg-secondary-500 text-white rounded-lg font-semibold hover:bg-secondary-600 transition-all text-sm",children:"Documento"})]})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{className:"font-semibold text-gray-900 mb-3",children:["Estructura (",e.length," bloques)"]}),0===e.length?(0,r.jsxs)("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl p-8 text-center",children:[(0,r.jsx)(v.AlertCircle,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,r.jsx)("p",{className:"text-gray-600 font-semibold",children:"No hay bloques aÃºn"}),(0,r.jsx)("p",{className:"text-gray-500 text-sm",children:"Agrega bloques usando los botones de arriba"})]}):(0,r.jsx)("div",{className:"space-y-2",children:e.map((a,i)=>(0,r.jsx)("div",{className:`border-2 rounded-xl p-4 transition-all cursor-pointer ${s?.id===a.id?"border-primary-500 bg-primary-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>{o(a)},children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,r.jsx)("div",{className:`p-2 rounded-lg ${I(a.tipo)}`,children:A(a.tipo)}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsxs)("span",{className:"text-xs font-bold text-gray-500",children:["#",i+1]}),(0,r.jsx)("span",{className:`text-xs px-2 py-1 rounded-full font-semibold ${I(a.tipo)}`,children:a.tipo.toUpperCase()})]}),(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:a.titulo||"(Sin tÃ­tulo)"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[a.duracion," min","evaluacion"===a.tipo&&a.preguntas&&` â€¢ ${a.preguntas.length} preguntas`]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("button",{type:"button",onClick:r=>{r.stopPropagation(),(r=>{if(0===r)return;let a=[...e];[a[r],a[r-1]]=[a[r-1],a[r]],t(a)})(i)},disabled:0===i,className:"p-1 hover:bg-gray-200 rounded disabled:opacity-30",children:(0,r.jsx)(g.ChevronUp,{className:"h-4 w-4"})}),(0,r.jsx)("button",{type:"button",onClick:r=>{r.stopPropagation(),(r=>{if(r===e.length-1)return;let a=[...e];[a[r],a[r+1]]=[a[r+1],a[r]],t(a)})(i)},disabled:i===e.length-1,className:"p-1 hover:bg-gray-200 rounded disabled:opacity-30",children:(0,r.jsx)(b.ChevronDown,{className:"h-4 w-4"})}),(0,r.jsx)("button",{type:"button",onClick:r=>{var i;r.stopPropagation(),i=a.id,t(e.filter(e=>e.id!==i)),s?.id===i&&o(null)},className:"p-1 hover:bg-red-100 text-red-600 rounded",children:(0,r.jsx)(x.Trash2,{className:"h-4 w-4"})})]})]})},a.id))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Editor"}),s?(0,r.jsxs)("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6 space-y-4",children:[(0,r.jsxs)("div",{className:`flex items-center gap-3 p-3 rounded-lg ${I(s.tipo)}`,children:[A(s.tipo),(0,r.jsxs)("span",{className:"font-bold text-sm uppercase",children:["Editando: ",s.tipo]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"TÃ­tulo del Bloque *"}),(0,r.jsx)("input",{type:"text",value:s.titulo,onChange:e=>P({...s,titulo:e.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none",placeholder:`T\xedtulo de ${s.tipo}`})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"DuraciÃ³n (minutos) *"}),(0,r.jsx)("input",{type:"number",value:s.duracion,onChange:e=>P({...s,duracion:parseInt(e.target.value)||0}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none",min:"1"})]}),"lectura"===s.tipo&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Contenido de la Lectura *"}),(0,r.jsx)("textarea",{value:s.contenido||"",onChange:e=>P({...s,contenido:e.target.value}),rows:8,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none resize-none",placeholder:"Escribe el contenido de la lectura aquÃ­..."}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"ðŸ’¡ Tip: Puedes usar Markdown para formatear el texto. Para agregar imÃ¡genes usa: ![texto](url-de-imagen)"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Agregar Imagen o PDF"}),(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-4",children:[(0,r.jsx)("input",{type:"url",placeholder:"URL de la imagen o PDF (ej: https://ejemplo.com/imagen.jpg)",className:"w-full px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none mb-2",onKeyDown:e=>{if("Enter"===e.key){let r=e.target.value;if(r){let a=r.toLowerCase().endsWith(".pdf")?`

[ðŸ“„ Ver PDF](${r})

`:`

![Imagen](${r})

`;P({...s,contenido:(s.contenido||"")+a}),e.target.value=""}}}}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"ðŸ“Ž Pega la URL de tu imagen o PDF y presiona Enter para agregarla al contenido"})]})]})]}),"video"===s.tipo&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"URL del Video (YouTube) *"}),(0,r.jsx)("input",{type:"text",value:s.videoUrl||"",onChange:e=>P({...s,videoUrl:e.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none",placeholder:"https://youtube.com/watch?v=..."})]}),"documento"===s.tipo&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Subir Documento PDF *"}),(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-primary-500 transition-colors",children:[(0,r.jsx)("input",{type:"file",accept:".pdf,application/pdf",onChange:e=>{let r=e.target.files?.[0];if(r){if("application/pdf"!==r.type)return void alert("Por favor selecciona un archivo PDF");if(r.size>0xa00000)return void alert("El archivo es muy grande. MÃ¡ximo 10MB");let e=new FileReader;e.onloadend=()=>{P({...s,videoUrl:e.result})},e.readAsDataURL(r)}},className:"hidden",id:`pdf-upload-${s.id}`}),(0,r.jsxs)("label",{htmlFor:`pdf-upload-${s.id}`,className:"cursor-pointer",children:[(0,r.jsx)(j,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-700",children:s.videoUrl?"âœ“ PDF cargado":"Click para seleccionar PDF"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"MÃ¡ximo 10MB"})]})]}),s.videoUrl&&(0,r.jsx)("button",{type:"button",onClick:()=>P({...s,videoUrl:""}),className:"text-sm text-red-600 hover:text-red-700 font-semibold",children:"Eliminar PDF"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"DescripciÃ³n del Documento (opcional)"}),(0,r.jsx)("textarea",{value:s.contenido||"",onChange:e=>P({...s,contenido:e.target.value}),rows:4,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none resize-none",placeholder:"InformaciÃ³n adicional sobre el documento..."})]})]}),"evaluacion"===s.tipo&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"DescripciÃ³n de la EvaluaciÃ³n *"}),(0,r.jsx)("textarea",{value:s.descripcion||"",onChange:e=>P({...s,descripcion:e.target.value}),rows:3,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none resize-none",placeholder:"Describe de quÃ© trata esta evaluaciÃ³n..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Porcentaje MÃ­nimo para Aprobar (%) *"}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("input",{type:"number",min:"0",max:"100",value:s.puntajeMinimo||100,onChange:e=>{let r=Math.min(100,Math.max(0,parseInt(e.target.value)||0));P({...s,puntajeMinimo:r})},className:"w-32 px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none text-center font-bold text-lg"}),(0,r.jsx)("span",{className:"text-gray-600 font-semibold",children:"% de respuestas correctas"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"El estudiante debe obtener al menos este porcentaje para aprobar la evaluaciÃ³n."})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Â¿CÃ³mo quieres crear las preguntas?"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>n("ia"),className:`flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold transition-all ${"ia"===i?"bg-primary-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"}`,children:[(0,r.jsx)("span",{className:"text-xl",children:"ðŸ¤–"}),(0,r.jsx)("span",{children:"Generar con IA"})]}),(0,r.jsxs)("button",{type:"button",onClick:()=>n("manual"),className:`flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold transition-all ${"manual"===i?"bg-primary-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"}`,children:[(0,r.jsx)("span",{className:"text-xl",children:"âœï¸"}),(0,r.jsx)("span",{children:"Crear Manualmente"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("label",{className:"text-sm font-semibold text-gray-700",children:["Preguntas de la EvaluaciÃ³n (",s.preguntas?.length||0,")"]}),"manual"===i&&(0,r.jsxs)("button",{type:"button",onClick:()=>{if(!s||"evaluacion"!==s.tipo)return;let e={id:Date.now().toString(),pregunta:"",tipo:"multiple",opciones:["",""],respuestaCorrecta:0,multipleRespuestas:!1,retroalimentacionPositiva:"",retroalimentacionNegativa:""};P({...s,preguntas:[...s.preguntas||[],e]})},className:"flex items-center gap-1 px-4 py-2 bg-primary-600 text-white text-sm rounded-lg font-semibold hover:bg-primary-700 transition-colors",children:[(0,r.jsx)(l,{className:"h-4 w-4"}),"Agregar Pregunta"]})]}),"ia"===i&&(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 space-y-4 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:"ðŸ¤–"}),(0,r.jsx)("h4",{className:"font-bold text-gray-900 text-lg",children:"Generador de Preguntas con IA"})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-800",children:[(0,r.jsx)("p",{className:"font-semibold mb-1",children:"ðŸ’¡ CÃ³mo funciona:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,r.jsx)("li",{children:"La IA lee el contenido y descripciÃ³n de este bloque"}),(0,r.jsx)("li",{children:"Genera preguntas con retroalimentaciÃ³n educativa"}),(0,r.jsx)("li",{children:"Puedes revisar y editar antes de agregar"}),(0,r.jsx)("li",{children:"Las preguntas se mezclan en dificultad automÃ¡ticamente"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"ðŸ“ 2 opciones (V/F)"}),(0,r.jsx)("input",{type:"number",min:"0",value:c.opcion2,onChange:e=>d({...c,opcion2:parseInt(e.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-center font-semibold"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"ðŸ“‹ 3 opciones (ABC)"}),(0,r.jsx)("input",{type:"number",min:"0",value:c.opcion3,onChange:e=>d({...c,opcion3:parseInt(e.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-center font-semibold"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"âœ… 4 opciones (ABCD)"}),(0,r.jsx)("input",{type:"number",min:"0",value:c.opcion4,onChange:e=>d({...c,opcion4:parseInt(e.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-center font-semibold"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"ðŸ“š 5 opciones (ABCDE)"}),(0,r.jsx)("input",{type:"number",min:"0",value:c.opcion5,onChange:e=>d({...c,opcion5:parseInt(e.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-center font-semibold"})]})]}),(0,r.jsx)("div",{className:"bg-gray-100 rounded-lg p-3 text-center border border-gray-200",children:(0,r.jsxs)("p",{className:"text-gray-900 font-semibold",children:["Total de preguntas: ",c.opcion2+c.opcion3+c.opcion4+c.opcion5]})}),(0,r.jsx)("button",{type:"button",onClick:S,disabled:p,className:"w-full bg-primary-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-primary-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-sm",children:p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"animate-spin",children:"âš™ï¸"}),"Generando preguntas..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"âœ¨"}),"Generar Preguntas con IA"]})}),m.length>0&&(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mt-4 border border-gray-300",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h4",{className:"font-semibold text-lg text-gray-900",children:["Preguntas Generadas (",m.length,")"]}),(0,r.jsx)("button",{type:"button",onClick:()=>{s&&(P({...s,preguntas:[...s.preguntas||[],...m]}),u([]),alert(`âœ… ${m.length} preguntas agregadas al bloque`))},className:"bg-primary-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-primary-700 transition-colors",children:"Agregar Todas"})]}),(0,r.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:m.map((e,a)=>(0,r.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("p",{className:"font-semibold text-gray-900 mb-2",children:[a+1,". ",e.pregunta]}),(0,r.jsx)("div",{className:"space-y-1 text-sm",children:e.opciones.map((a,t)=>(0,r.jsxs)("div",{className:`px-3 py-1 rounded ${t===e.respuestaCorrecta?"bg-primary-100 text-primary-900 font-semibold":"bg-gray-50 text-gray-700 border border-gray-200"}`,children:[String.fromCharCode(65+t),". ",a]},t))}),(e.retroalimentacionPositiva||e.retroalimentacionNegativa)&&(0,r.jsxs)("div",{className:"mt-2 space-y-1",children:[e.retroalimentacionPositiva&&(0,r.jsxs)("div",{className:"text-xs text-gray-700 bg-green-50 p-2 rounded border border-green-200",children:[(0,r.jsx)("strong",{children:"âœ… Correcta:"})," ",e.retroalimentacionPositiva]}),e.retroalimentacionNegativa&&(0,r.jsxs)("div",{className:"text-xs text-gray-700 bg-red-50 p-2 rounded border border-red-200",children:[(0,r.jsx)("strong",{children:"âŒ Incorrecta:"})," ",e.retroalimentacionNegativa]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{C({...m[a],index:a})},className:"bg-gray-600 text-white px-3 py-1 rounded text-sm font-semibold hover:bg-gray-700 transition-colors whitespace-nowrap",children:"âœï¸ Editar"}),(0,r.jsx)("button",{type:"button",onClick:()=>{s&&(P({...s,preguntas:[...s.preguntas||[],e]}),alert("âœ… Pregunta agregada al bloque"))},className:"bg-primary-600 text-white px-3 py-1 rounded text-sm font-semibold hover:bg-primary-700 transition-colors whitespace-nowrap",children:"+ Agregar"}),(0,r.jsx)("button",{type:"button",onClick:()=>{u(m.filter((e,r)=>r!==a))},className:"bg-red-600 text-white px-3 py-1 rounded text-sm font-semibold hover:bg-red-700 transition-all whitespace-nowrap",children:"ðŸ—‘ï¸ Eliminar"})]})]})},a))})]})]}),s.preguntas&&0!==s.preguntas.length?(0,r.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:s.preguntas.map((e,a)=>(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("span",{className:"text-xs font-bold text-gray-500",children:["Pregunta ",a+1]}),(0,r.jsx)("button",{type:"button",onClick:()=>{var r;return r=e.id,void(s&&s.preguntas&&P({...s,preguntas:s.preguntas.filter(e=>e.id!==r)}))},className:"text-red-600 hover:text-red-700",children:(0,r.jsx)(x.Trash2,{className:"h-4 w-4"})})]}),(0,r.jsx)("input",{type:"text",value:e.pregunta,onChange:r=>E(e.id,"pregunta",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Escribe la pregunta..."}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>E(e.id,"tipo","multiple"),className:`flex-1 px-3 py-2 rounded-lg text-sm font-semibold ${"multiple"===e.tipo?"bg-primary-600 text-white":"bg-gray-200 text-gray-700"}`,children:"MÃºltiple"}),(0,r.jsx)("button",{type:"button",onClick:()=>E(e.id,"tipo","abierta"),className:`flex-1 px-3 py-2 rounded-lg text-sm font-semibold ${"abierta"===e.tipo?"bg-primary-600 text-white":"bg-gray-200 text-gray-700"}`,children:"Abierta"})]}),"multiple"===e.tipo&&(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 bg-blue-50 rounded-lg p-3",children:[(0,r.jsx)("input",{type:"checkbox",id:`multiple-${e.id}`,checked:e.multipleRespuestas||!1,onChange:r=>{let a=r.target.checked;console.log("Cambio a mÃºltiple respuestas:",a),console.log("Pregunta antes:",e);let t=s.preguntas.map(r=>r.id===e.id?{...r,multipleRespuestas:a,respuestaCorrecta:a?[]:0}:r);P({...s,preguntas:t}),console.log("Pregunta despuÃ©s:",t.find(r=>r.id===e.id))},className:"w-4 h-4 cursor-pointer"}),(0,r.jsxs)("label",{htmlFor:`multiple-${e.id}`,className:"text-sm font-semibold text-blue-700 cursor-pointer flex-1",children:["Permitir mÃºltiples respuestas correctas ",e.multipleRespuestas?"âœ“":""]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 font-semibold",children:e.multipleRespuestas?"â˜‘ï¸ Marca todas las opciones correctas:":"â­• Selecciona la opciÃ³n correcta:"}),(e.opciones||[]).map((a,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[e.multipleRespuestas?(0,r.jsx)("input",{type:"checkbox",checked:Array.isArray(e.respuestaCorrecta)&&e.respuestaCorrecta.includes(t),onChange:r=>{r.stopPropagation();let a=Array.isArray(e.respuestaCorrecta)?[...e.respuestaCorrecta]:[];if(r.target.checked)a.includes(t)||a.push(t);else{let e=a.indexOf(t);e>-1&&a.splice(e,1)}console.log("Actualizando respuestas correctas:",a),E(e.id,"respuestaCorrecta",a)},className:"w-4 h-4 cursor-pointer"}):(0,r.jsx)("input",{type:"radio",name:`respuesta-${e.id}`,checked:e.respuestaCorrecta===t,onChange:()=>E(e.id,"respuestaCorrecta",t),className:"w-4 h-4"}),(0,r.jsx)("input",{type:"text",value:a,onChange:r=>{let a=[...e.opciones||[]];a[t]=r.target.value,E(e.id,"opciones",a)},className:"flex-1 px-3 py-1 border border-gray-300 rounded text-sm",placeholder:`Opci\xf3n ${String.fromCharCode(65+t)}`}),(e.opciones?.length||0)>2&&(0,r.jsx)("button",{type:"button",onClick:()=>{let r=[...e.opciones||[]];r.splice(t,1),E(e.id,"opciones",r)},className:"text-red-600 hover:text-red-700",children:(0,r.jsx)(x.Trash2,{className:"h-4 w-4"})})]},t))]}),(0,r.jsx)("button",{type:"button",onClick:()=>{let r=[...e.opciones||[],""];E(e.id,"opciones",r)},className:"w-full px-3 py-2 border-2 border-dashed border-gray-300 rounded-lg text-sm font-semibold text-gray-600 hover:border-gray-400 hover:text-gray-700",children:"+ Agregar OpciÃ³n"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-semibold text-gray-600 mb-1",children:"RetroalimentaciÃ³n Positiva"}),(0,r.jsx)("textarea",{value:e.retroalimentacionPositiva||"",onChange:r=>E(e.id,"retroalimentacionPositiva",r.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm resize-none",placeholder:"Mensaje cuando responde correctamente..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-semibold text-gray-600 mb-1",children:"RetroalimentaciÃ³n Negativa"}),(0,r.jsx)("textarea",{value:e.retroalimentacionNegativa||"",onChange:r=>E(e.id,"retroalimentacionNegativa",r.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm resize-none",placeholder:"Mensaje cuando responde incorrectamente..."})]})]},`${e.id}-${e.multipleRespuestas}`))}):(0,r.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 text-center text-sm text-gray-500",children:"No hay preguntas. Agrega una usando el botÃ³n de arriba."})]})]}):(0,r.jsxs)("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl p-8 text-center",children:[(0,r.jsx)(v.AlertCircle,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,r.jsx)("p",{className:"text-gray-600 font-semibold",children:"Selecciona un bloque para editarlo"}),(0,r.jsx)("p",{className:"text-gray-500 text-sm",children:"O agrega uno nuevo usando los botones de arriba"})]})]})]}),w&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"âœï¸ Editar Pregunta"}),(0,r.jsx)("button",{type:"button",onClick:()=>C(null),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"âœ•"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Pregunta"}),(0,r.jsx)("input",{type:"text",value:w.pregunta,onChange:e=>C({...w,pregunta:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Escribe la pregunta..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Opciones de Respuesta"}),(0,r.jsx)("div",{className:"space-y-2",children:w.opciones.map((e,a)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"font-bold text-gray-600 w-8",children:[String.fromCharCode(65+a),"."]}),(0,r.jsx)("input",{type:"text",value:e,onChange:e=>{let r=[...w.opciones];r[a]=e.target.value,C({...w,opciones:r})},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:`Opci\xf3n ${String.fromCharCode(65+a)}`})]},a))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Respuesta Correcta"}),(0,r.jsx)("select",{value:w.respuestaCorrecta,onChange:e=>C({...w,respuestaCorrecta:parseInt(e.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:w.opciones.map((e,a)=>(0,r.jsxs)("option",{value:a,children:[String.fromCharCode(65+a),". ",w.opciones[a]]},a))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"RetroalimentaciÃ³n Positiva"}),(0,r.jsx)("textarea",{value:w.retroalimentacionPositiva||"",onChange:e=>C({...w,retroalimentacionPositiva:e.target.value}),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Mensaje cuando responde correctamente..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"RetroalimentaciÃ³n Negativa"}),(0,r.jsx)("textarea",{value:w.retroalimentacionNegativa||"",onChange:e=>C({...w,retroalimentacionNegativa:e.target.value}),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Mensaje cuando responde incorrectamente..."})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{if(!w)return;let e=[...m];e[w.index]={id:w.id,tipo:w.tipo,pregunta:w.pregunta,opciones:w.opciones,respuestaCorrecta:w.respuestaCorrecta,retroalimentacionPositiva:w.retroalimentacionPositiva,retroalimentacionNegativa:w.retroalimentacionNegativa},u(e),C(null),alert("âœ… Pregunta actualizada")},className:"flex-1 bg-primary-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-primary-700 transition-colors",children:"ðŸ’¾ Guardar Cambios"}),(0,r.jsx)("button",{type:"button",onClick:()=>C(null),className:"flex-1 bg-gray-300 text-gray-700 px-6 py-3 rounded-lg font-bold hover:bg-gray-400 transition-all",children:"Cancelar"})]})]})]})})]})}function w(){let[e,i]=(0,a.useState)([]),[x,g]=(0,a.useState)(!1),[b,h]=(0,a.useState)(!1),[y,f]=(0,a.useState)(null),[j,v]=(0,a.useState)({titulo:"",descripcion:"",categoria:"",duracion:"",nivel:"Principiante",instructor:"",imagen:"",contenido:"",precio:"0",videoUrl:"",claveInscripcion:"",evaluaciones:[],duracionEstimada:60,prerequisitos:"",certificadoTemplate:"",emailReporte:""}),[w,C]=(0,a.useState)([]),[k,P]=(0,a.useState)(!1),[E,S]=(0,a.useState)({tipo:"multiple",pregunta:"",opciones:["","","",""],respuestaCorrecta:0,retroalimentacion:""}),[A,I]=(0,a.useState)(null),[q,D]=(0,a.useState)(!1),[R,M]=(0,a.useState)(null),[$,T]=(0,a.useState)(!1),[F,z]=(0,a.useState)(null),[B,G]=(0,a.useState)(!1);(0,a.useEffect)(()=>{U()},[]);let U=async()=>{try{let e=(await p.default.listarCursos()).sort((e,r)=>new Date(r.createdAt).getTime()-new Date(e.createdAt).getTime());i(e)}catch(e){console.error("Error al cargar cursos:",e),i([])}},O=async e=>{e.preventDefault(),h(!0);try{let e={titulo:j.titulo,descripcion:j.descripcion,categoria:j.categoria,duracion:j.duracion,nivel:j.nivel,instructor:j.instructor,imagen:j.imagen,contenido:j.contenido,precio:j.precio,videoUrl:j.videoUrl,claveInscripcion:j.claveInscripcion,duracionEstimada:j.duracionEstimada,prerequisitos:j.prerequisitos,certificadoTemplate:j.certificadoTemplate,emailReporte:j.emailReporte,bloques:JSON.stringify(w),activo:!0,...y&&{id:y}},r=await p.default.guardarCurso(e);if(console.log("Curso guardado:",r),y?alert("Curso actualizado exitosamente"):alert("Curso creado exitosamente"),await U(),!y)try{let a=await fetch("/api/notificaciones",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tipo:"nuevo_curso",titulo:"Â¡Nuevo curso disponible!",mensaje:`Se ha publicado el curso "${e.titulo}" en la categor\xeda ${e.categoria}. \xa1Inscr\xedbete ahora!`,cursoId:r.id})}),t=await a.json();console.log("ðŸ“¢ NotificaciÃ³n enviada:",t)}catch(e){console.error("Error al enviar notificaciÃ³n:",e)}f(null),v({titulo:"",descripcion:"",categoria:"",duracion:"",nivel:"Principiante",instructor:"",imagen:"",contenido:"",precio:"0",videoUrl:"",claveInscripcion:"",evaluaciones:[],duracionEstimada:60,prerequisitos:"",certificadoTemplate:"",emailReporte:""}),C([]),g(!1),alert("Curso creado exitosamente con "+w.length+" bloques! Se ha notificado a todos los usuarios.")}catch(e){console.error("Error completo:",e),alert("Error al crear el curso: "+(e.message||JSON.stringify(e)))}finally{h(!1)}},L=e=>{v({...j,[e.target.name]:e.target.value})},J=async r=>{let a=e.find(e=>e.id===r);if(window.confirm(`\xbfEst\xe1s seguro de eliminar el curso "${a?.titulo}"?

Esta acci\xf3n no se puede deshacer y se perder\xe1n todos los datos asociados.`))try{await p.default.eliminarCurso(r),await U(),alert("âœ… Curso eliminado exitosamente")}catch(e){console.error("Error al eliminar curso:",e),alert("âŒ Error al eliminar el curso")}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(t.Navbar,{}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"AdministraciÃ³n de Cursos"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Crea y gestiona los cursos de Academia SantafÃ©"})]})}),(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("button",{onClick:()=>{g(!x),x&&f(null)},className:"bg-primary-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-primary-700 transition-all duration-300 flex items-center gap-2 shadow-lg hover:shadow-xl",children:[x?(0,r.jsx)(n.X,{className:"h-5 w-5"}):(0,r.jsx)(l,{className:"h-5 w-5"}),x?"Cancelar":"Crear Nuevo Curso"]})}),x&&(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8 border border-gray-100",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,r.jsx)(o.BookOpen,{className:"h-6 w-6 text-primary-600"}),y?"Editar Curso":"Nuevo Curso"]}),(0,r.jsxs)("form",{onSubmit:O,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"TÃ­tulo del Curso *"}),(0,r.jsx)("input",{type:"text",name:"titulo",value:j.titulo,onChange:L,required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all",placeholder:"Ej: Seguridad Industrial BÃ¡sica"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"CategorÃ­a *"}),(0,r.jsx)("input",{type:"text",name:"categoria",value:j.categoria,onChange:L,required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all",placeholder:"Ej: Seguridad, ProducciÃ³n, Calidad"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Instructor *"}),(0,r.jsx)("input",{type:"text",name:"instructor",value:j.instructor,onChange:L,required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all",placeholder:"Nombre del instructor"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"DuraciÃ³n *"}),(0,r.jsx)("input",{type:"text",name:"duracion",value:j.duracion,onChange:L,required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all",placeholder:"Ej: 4 horas, 2 semanas"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ðŸ“§ Correo para Reportes Diarios"}),(0,r.jsx)("input",{type:"email",name:"emailReporte",value:j.emailReporte,onChange:L,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all",placeholder:"admin@empresa.com"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Los reportes diarios de este curso se enviarÃ¡n a este correo"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nivel"}),(0,r.jsxs)("select",{name:"nivel",value:j.nivel,onChange:L,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all",children:[(0,r.jsx)("option",{children:"Principiante"}),(0,r.jsx)("option",{children:"Intermedio"}),(0,r.jsx)("option",{children:"Avanzado"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Clave de InscripciÃ³n *"}),(0,r.jsx)("input",{type:"text",name:"claveInscripcion",value:j.claveInscripcion,onChange:L,required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all",placeholder:"Clave que el instructor proporcionarÃ¡"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Imagen del Curso (Portada)"}),(0,r.jsx)("div",{className:"space-y-3",children:R||j.imagen?(0,r.jsxs)("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"bg-green-100 p-2 rounded-lg",children:(0,r.jsx)(c,{className:"h-5 w-5 text-green-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-green-900",children:R?.name||"Imagen cargada"}),(0,r.jsx)("p",{className:"text-sm text-green-600",children:R?`${(R.size/1024).toFixed(2)} KB`:"Imagen guardada"})]})]}),(0,r.jsx)("button",{type:"button",onClick:()=>{M(null),v({...j,imagen:""})},className:"text-red-600 hover:text-red-700 font-semibold",children:"Eliminar"})]}),j.imagen&&(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)("img",{src:j.imagen,alt:"Vista previa",className:"max-h-48 rounded-lg mx-auto object-cover"})})]}):(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-primary-400 transition-all",children:[(0,r.jsx)(c,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,r.jsxs)("label",{className:"cursor-pointer",children:[(0,r.jsx)("span",{className:"text-primary-600 font-semibold hover:text-primary-700",children:"Click para subir imagen"}),(0,r.jsx)("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:e=>{let r=e.target.files?.[0];if(r){if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(r.type))return void alert("Por favor selecciona una imagen vÃ¡lida (JPEG, JPG, PNG, GIF, WEBP)");if(r.size>5242880)return void alert("La imagen es demasiado grande. MÃ¡ximo 5MB");M(r),T(!0);try{let e=new FileReader;e.onload=()=>{let r=e.result;v({...j,imagen:r}),T(!1)},e.onerror=()=>{alert("Error al leer la imagen"),T(!1)},e.readAsDataURL(r)}catch(e){console.error("Error al cargar imagen:",e),alert("Error al cargar la imagen"),T(!1)}}},className:"hidden"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"MÃ¡ximo 5MB â€¢ JPEG, JPG, PNG, GIF, WEBP"})]})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"DescripciÃ³n *"}),(0,r.jsx)("textarea",{name:"descripcion",value:j.descripcion,onChange:L,required:!0,rows:4,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all resize-none",placeholder:"Describe el curso, objetivos, y quÃ© aprenderÃ¡n los estudiantes..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Contenido del Curso"}),(0,r.jsx)("textarea",{name:"contenido",value:j.contenido,onChange:L,rows:4,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all resize-none",placeholder:"Resumen breve de los temas que se cubrirÃ¡n en el curso..."})]}),(0,r.jsx)("div",{className:"border-t-2 border-gray-200 pt-6",children:(0,r.jsx)(N,{bloques:w,onBloquesChange:C})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Plantilla del Certificado (PDF o Imagen)"}),(0,r.jsxs)("div",{className:"space-y-3",children:[F||j.certificadoTemplate?(0,r.jsx)("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"bg-green-500 text-white p-2 rounded-lg",children:(0,r.jsx)(o.BookOpen,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:F?.name||"Plantilla cargada"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:F?`${(F.size/1024).toFixed(1)} KB`:"Archivo guardado"})]})]}),(0,r.jsx)("button",{type:"button",onClick:()=>{z(null),v({...j,certificadoTemplate:""})},className:"text-red-500 hover:text-red-700 transition-colors",children:(0,r.jsx)(n.X,{className:"h-5 w-5"})})]})}):(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-primary-400 transition-all",children:[(0,r.jsx)(c,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,r.jsxs)("label",{className:"cursor-pointer",children:[(0,r.jsx)("span",{className:"text-primary-600 font-semibold hover:text-primary-700",children:"Click para subir archivo"}),(0,r.jsx)("input",{type:"file",accept:".pdf,application/pdf,image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:e=>{let r=e.target.files?.[0];if(r){if(!["application/pdf","image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(r.type))return void alert("Por favor selecciona un PDF o imagen vÃ¡lida (JPEG, JPG, PNG, GIF, WEBP)");if(r.size>5242880)return void alert("El archivo es demasiado grande. MÃ¡ximo 5MB");z(r),G(!0);try{let e=new FileReader;e.onload=()=>{let r=e.result;v({...j,certificadoTemplate:r}),G(!1)},e.onerror=()=>{alert("Error al leer el archivo"),G(!1)},e.readAsDataURL(r)}catch(e){console.error("Error al cargar archivo:",e),alert("Error al cargar el archivo"),G(!1)}}},className:"hidden"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"MÃ¡ximo 5MB â€¢ PDF, JPEG, JPG, PNG, GIF, WEBP"})]}),B&&(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-3 text-center",children:(0,r.jsx)("p",{className:"text-sm text-blue-700",children:"Procesando archivo..."})})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["El sistema agregarÃ¡ automÃ¡ticamente el nombre del estudiante, curso, fecha e instructor sobre tu plantilla.",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Tip:"})," DiseÃ±a tu archivo (A4 horizontal) dejando espacio en el centro para el texto dinÃ¡mico."]})]}),(0,r.jsxs)("div",{className:"flex gap-4 pt-6 border-t-2 border-gray-200",children:[(0,r.jsxs)("button",{type:"submit",className:"bg-primary-600 text-white px-8 py-3 rounded-xl font-semibold hover:bg-primary-700 transition-all duration-300 flex items-center gap-2 shadow-lg hover:shadow-xl",children:[(0,r.jsx)(d,{className:"h-5 w-5"}),y?"Actualizar Curso":"Guardar Curso"]}),(0,r.jsx)("button",{type:"button",onClick:()=>{g(!1),f(null)},className:"bg-gray-200 text-gray-700 px-8 py-3 rounded-xl font-semibold hover:bg-gray-300 transition-all duration-300",children:"Cancelar"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:["Cursos Creados (",e.length,")"]}),0===e.length?(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center border border-gray-100",children:[(0,r.jsx)(o.BookOpen,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-500 text-lg",children:"No hay cursos creados aÃºn"}),(0,r.jsx)("p",{className:"text-gray-400 mt-2",children:"Crea tu primer curso usando el botÃ³n de arriba"})]}):(0,r.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl hover:-translate-y-2 transition-all duration-300 border border-gray-100",children:[(0,r.jsx)("div",{className:"h-48 bg-primary-500 flex items-center justify-center cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.location.href=`/curso/${e.id}?preview=true`,children:e.imagen?(0,r.jsx)("img",{src:e.imagen,alt:e.titulo,className:"w-full h-full object-cover"}):(0,r.jsx)(o.BookOpen,{className:"h-16 w-16 text-white opacity-50"})}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsx)("span",{className:"px-3 py-1 bg-primary-100 text-primary-700 rounded-full text-sm font-semibold",children:e.categoria}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>{try{console.log("Curso a editar:",e);let r=e.bloques&&"string"==typeof e.bloques&&""!==e.bloques.trim()?JSON.parse(e.bloques):[];v({titulo:e.titulo||"",descripcion:e.descripcion||"",instructor:e.instructor||"",duracion:e.duracion||"",nivel:e.nivel||"Principiante",categoria:e.categoria||"",imagen:e.imagen||"",videoUrl:e.videoUrl||"",contenido:e.contenido||"",precio:e.precio?.toString()||"0",claveInscripcion:e.claveInscripcion||"",evaluaciones:[],duracionEstimada:e.duracionEstimada||60,prerequisitos:e.prerequisitos||"",certificadoTemplate:e.certificadoTemplate||"",emailReporte:e.emailReporte||""}),C(r),f(e.id),g(!0),window.scrollTo({top:0,behavior:"smooth"})}catch(e){console.error("Error al cargar curso:",e),alert("Error al cargar el curso para editar: "+e)}},className:"text-blue-500 hover:text-blue-700 hover:bg-blue-50 p-2 rounded-lg transition-all",title:"Editar curso",children:(0,r.jsx)(m,{className:"h-5 w-5"})}),(0,r.jsx)("button",{onClick:()=>J(e.id),className:"text-red-500 hover:text-red-700 hover:bg-red-50 p-2 rounded-lg transition-all",title:"Eliminar curso",children:(0,r.jsx)(n.X,{className:"h-5 w-5"})})]})]}),(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2 hover:text-primary-600 cursor-pointer",onClick:()=>window.location.href=`/curso/${e.id}?preview=true`,children:e.titulo}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:e.descripcion}),(0,r.jsxs)("div",{className:"space-y-2 text-sm text-gray-500 mb-4",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Instructor:"})," ",e.instructor]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"DuraciÃ³n:"})," ",e.duracion]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Nivel:"})," ",e.nivel]}),e.emailReporte&&(0,r.jsxs)("p",{className:"text-xs text-green-600",children:["ðŸ“§ ",e.emailReporte]}),(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:["Creado: ",new Date(e.createdAt||e.fechacreacion).toLocaleDateString("es-CO")]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>window.location.href=`/curso/${e.id}?preview=true`,className:"flex-1 bg-primary-600 text-white py-2 rounded-lg font-semibold hover:bg-primary-700 transition-colors cursor-pointer",children:"Ver Preview"}),(0,r.jsxs)("button",{onClick:()=>window.location.href=`/admin/reportes?curso=${e.id}`,className:"flex-1 bg-green-600 text-white py-2 rounded-lg font-semibold hover:bg-green-700 transition-colors cursor-pointer flex items-center justify-center gap-2",title:"Ver reportes de este curso",children:[(0,r.jsx)(u.FileSpreadsheet,{className:"h-4 w-4"}),"Reportes"]})]})]})]},e.id))})]})]}),(0,r.jsx)(s.Footer,{})]})}e.s(["default",()=>w],32911)}]);